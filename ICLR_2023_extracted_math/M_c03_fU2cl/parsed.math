('1', '\\times')
('3.0.0', 'K')
('3.0.0', '\\mathcal{D}_i=\\{({\\bm x}_i,y_i)\\}_{i=1}^{n_i}')
('3.0.0', '{\\bm x}\\in\\mathcal{X}')
('3.0.0', 'y\\in\\mathcal{Y}')
('3.0.0', '\\mathcal{D}_S=\\bigcup_{i=1}^K\\mathcal{D}_i=\\{({\\bm x}_i,y_i,d_i)\\}_{i=1}^{n_s}')
('3.0.0', 'd_i')
('3.0.0', 'n_s = \\sum_{i=1}^Kn_i')
('3.0.0', 'F:\\mathcal{X}\\rightarrow Y')
('3.0.0', '\\mathcal{D}_T')
('3.0.0', 'F')
('3.0.0', '\\phi\\circ f')
('3.0.0', 'f:\\mathcal{X}\\rightarrow\\mathcal{H}')
('3.0.0', '\\phi:\\mathcal{H}\\rightarrow\\mathcal{Y}')
('3.0.0', 'f')
('3.0.0.0', '\\bm x')
('3.0.0.0', 'k')
('3.0.0.0', '\\{I_i\\}_{i=1}^k')
('3.0.0.0', 'E')
('3.0.0.0', '\\mathop{\\mathrm{\\texttt{[CLS]}}}')
('3.0.0.0', '\\ell')
('3.0.0.0', '\\begin{aligned}\n    \\mathop{\\mathrm{\\texttt{[CLS]}}}&= f([\\mathop{\\mathrm{\\texttt{[CLS]}}}, E(I_1), \\cdots, E(I_k)) \\\\\n    y &= \\phi(\\mathop{\\mathrm{\\texttt{[CLS]}}}),\n\\end{aligned}')
('3.0.0.0', '[\\cdot]')
('3.1', '\\mathcal{L}_{\\text{ERM}}=\\frac{1}{K}\\sum_{i=1}^K\\frac{1}{n_i}\\sum_{(x,y)\\in\\mathcal{D}_i}\\mathop{\\mathrm{\\texttt{cross\\_entropy}}}(\\phi(f({\\bm x})), y).')
('3.2', 'L')
('3.2', 'K')
('3.2', '\\texttt{prompts} = \\Big\\{\\{\\texttt{[DOM]}^j\\}_{i=1}^L\\Big\\}_{j=1}^K.')
('3.2', '\\mathop{\\mathrm{\\texttt{[CLS]}}}= f_d({\\bm x}) = f([\\,\\,\\mathop{\\mathrm{\\texttt{[CLS]}}},\\,\\,\\{E(I_i)\\}_{i=1}^k,\\,\\,\\texttt{prompts}_d\\,\\,]),')
('3.2', '\\texttt{prompts}_d')
('3.2', 'd')
('3.2', 'f_d')
('3.2', '\\texttt{prompts}')
('3.2', '\\mathcal{L}_{\\text{prompt}} =\\frac{1}{|\\mathcal{D}_S|}\\sum_{({\\bm x},y,d)\\in\\mathcal{D}_S}\\mathop{\\mathrm{\\texttt{cross\\_entropy}}}(\\phi(f_d({\\bm x})), y).\\label{eq:dpl}')
('3.2', 'T')
('3.2', 'f')
('3.2', '\\phi')
('3.2', '\\texttt{prompts}')
('3.2', 'A')
('3.2', '(x^{i_1}_1, y^{i_1}_1),\\cdots,(x^{i_m}_m, y^{i_m}_m)')
('3.2', 'm')
('3.2', '\\mathcal{D}_1,\\cdots,\\mathcal{D}_m')
('3.2', '\\rhd')
('3.2', '\\mathcal{L}_{\\text{prompt}}')
('3.2', '\\rhd')
('3.2', 'h_i \\gets \\text{stop\\_gradients}(f(x_i))')
('3.2', '\\texttt{adapted\\_prompts}\\gets A(h)')
('3.2', '\\mathcal{L}_{\\text{w}}, \\mathcal{L}_{\\text{adapt}}')
('3.2', '\\mathcal{L} \\gets \\mathcal{L}_{\\text{prompt}}+\\mathcal{L}_{\\text{adapt}}+\\lambda\\mathcal{L}_{\\text{w}}')
('3.2', '\\mathcal{L}')
('3.3', '\\sum_{d=1}^{n_s}\\phi(f_d(x))')
('3.3', '\\texttt{adapted\\_prompt} = A(f({\\bm x})) = \\Big\\{\\sum_{d=1}^{K}w_d^j\\cdot\\texttt{[DOM]}_d^j\\Big\\}_{j=1}^K.')
('3.3', 'A')
('3.3', 'w_d')
('3.3', 'A')
('3.3', 'A')
('3.3', '\\sum_{d=1}^{K}w_d^j=1')
('3.3', "\\begin{aligned}\n    \\texttt{[CLS]}' &= f([\\,\\,\\mathop{\\mathrm{\\texttt{[CLS]}}},\\,\\,\\{E(I_i)\\}_{i=1}^k]) \\label{eq:inf_st}\\\\\n    \\texttt{adapted\\_prompts} &= A(\\,\\,\\texttt{[CLS]}'\\,\\,) \\\\\n    \\texttt{[CLS]}'' &= f([\\,\\,\\texttt{[CLS]}',\\,\\,\\{E(I_i)\\}_{i=1}^k,\\,\\,\\texttt{adapted\\_prompts}\\,\\,]) \\\\\n    y &= \\phi(\\,\\,\\,\\texttt{[CLS]}''\\,). \\label{eq:inf_end}\n\\end{aligned}")
('3.3', 't')
('3.3', 'A(f(x))')
('3.3', '\\mathcal{L}_{\\text{w}} = \\frac{1}{K}\\sum_{j=1}^K\\frac{1}{K}\\Big(\\mathop{\\mathrm{\\texttt{cross\\_entropy}}}(w_j^j, 1) + \\sum_{d\\neq t}\\mathop{\\mathrm{\\texttt{cross\\_entropy}}}(w_d^j, 0)\\Big). \\label{eq:pal}')
('3.3', '\\mathcal{L}_{\\text{adapt}} = \\frac{1}{|\\mathcal{D}_S|}\\sum_{({\\bm x},y,d)\\in\\mathcal{D}_S}\\mathop{\\mathrm{\\texttt{cross\\_entropy}}}(\\phi(f_{\\texttt{adapted}}({\\bm x})), y), \\label{eq:la}')
('3.3', 'f_{\\texttt{adapted}}')
('3.3', '\\mathcal{L}_{\\text{prompt}}')
('3.3', '\\mathcal{L}_{\\text{adapt}}')
('3.3', '\\lambda')
('3.3', '\\mathcal{L}_{\\text{w}}')
('4.0.0.0', '1e^{-2}')
('4.0.0.0', '5e^{-6}')
('4.0.0.0', '1e^{-5}')
('4.0.0.0', '5e^{-5}')
('4.0.0.0', 'L')
('4.0.0.0', '4')
('4.0.0.0', '\\lambda')
('4.0.0.0', '\\{0.1, 1, 10\\}')
('4.0.0.0', '\\Delta')
('4.1', '\\times')
('4.1', '_{\\pm 0.5}')
('4.1', '_{\\pm 0.6}')
('4.1', '_{\\pm 0.1}')
('4.1', '_{\\pm 0.1}')
('4.1', '_{\\pm 0.0}')
('4.1', '_{\\pm 0.5}')
('4.1', '_{\\pm 0.1}')
('4.1', '_{\\pm 0.3}')
('4.1', '_{\\pm 0.3}')
('4.1', '_{\\pm 0.5}')
('4.1', '_{\\pm 0.3}')
('4.1', '_{\\pm 0.2}')
('4.1', '\\mathcal{L}_{\\text{w}}')
('4.1', '_{\\pm 0.1}')
('4.1', '_{\\pm 0.3}')
('4.1', '_{\\pm 0.5}')
('4.1', '_{\\pm 0.3}')
('4.1', '\\mathcal{L}_{\\text{adapt}}')
('4.1', '_{\\pm 0.1}')
('4.1', '_{\\pm 0.5}')
('4.1', '_{\\pm 0.2}')
('4.1', '_{\\pm 0.1}')
('4.1', '_{\\pm 0.3}')
('4.1', '_{\\pm 0.5}')
('4.1', '_{\\pm 0.2}')
('4.1', '_{\\pm 0.2}')
('7', '\\texttt{cent}_d=\\frac{1}{|\\mathcal{D}_d|}\\sum_{i=1}^{\\mathcal{D}_d}{\\bm x}_i;\\quad \\texttt{cent}_c^d=\\frac{1}{N_c^d}\\sum_{\\substack{y=c\\\\({\\bm x},y)\\in\\mathcal{D}_d}}{\\bm x},')
('7', 'N_c^d')
('7', 'c')
('7', 'd')
('7', '\\texttt{dist}(\\cdot, \\cdot)')
('7', '\\texttt{class\\_dist}(\\cdot, \\cdot)')
('7', '\\begin{aligned}\n    \\texttt{cosine\\_dist}({\\bm x}_i, {\\bm x}_j) & =1-\\frac{{\\bm x}_i\\cdot {\\bm x}_j}{\\|{\\bm x}_i\\|\\cdot\\|{\\bm x}_j\\|}\\\\\n    \\texttt{in\\_dist}(D_i) &= \\frac{1}{|D_i|}\\sum_{{\\bm x}\\in D_i}\\texttt{cosine\\_dist}({\\bm x},\\texttt{cent}_i)\\\\\n    \\texttt{dist}(D_i, D_j) & =\\frac{\\texttt{cosine\\_dist}(\\texttt{cent}_i, \\texttt{cent}_j)}{\\frac{1}{2}\\big(\\texttt{in\\_dist}(D_i)+\\texttt{in\\_dist}(D_j)\\big)}\\\\\n    \\texttt{class\\_dist}(D_i, D_j) &= \\frac{1}{n_c}\\sum_{i=1}^{n_c}\\texttt{dist}(D_i^c, D_j^c),\n\\end{aligned}')
('7', 'n_c')
('7', 'D_i^c')
('7', 'c')
('7', 'i')
('10', '\\gamma')
('10', '10^{\\text{Uniform}(-1, 1)}')
('10', '\\{\\textbf{0.1}, 1, 10\\}')
('10', '\\gamma')
('10', '10^{\\text{Uniform}(-2, 2)}')
('10', '\\{\\textbf{0.1}, 1, 10\\}')
('10', '10^{\\text{Uniform}(-6, -2)}')
('10', '2^{\\text{Uniform}(0,3)}')
('10', '10^{\\text{Uniform}(-2, 1)}')
('10', '\\beta_1')
('10', '\\{0, 0.5\\}')
('10', '\\beta')
('10', '10^{\\text{Uniform}(-1, 1)}')
('10', '\\{0.1, 1, \\textbf{10}\\}')
('10', '\\eta')
('10', '10^{\\text{Uniform}(-1, 1)}')
('10', '\\{\\textbf{0.01}, 0.1, 1, 10\\}')
('10', '\\lambda')
('10', '10^{\\text{Uniform}(-1, 5)}')
('10', '\\{\\textbf{0.1},1,10,100,1000\\}')
('10', '10^{\\text{Uniform}(0, 4)}')
('10', '\\alpha')
('10', '\\{0.1, \\textbf{0.2}, 0.5\\}')
('10', '\\lambda')
('10', '\\mathcal{L}=\\mathcal{L}_{\\text{ERM}} + \\gamma\\mathcal{L}_{\\text{Align}}')
('10', '\\beta_1=0.5')
