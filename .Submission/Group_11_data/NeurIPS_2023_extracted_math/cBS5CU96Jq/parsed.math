('2.1', 'L_1')
('3.0', '\\mathbf{x}_1, \\mathbf{x}_2, \\cdots \\mathbf{x}_T')
('3.0', '\\mathbf{x}_0 \\in \\mathbb{R}^{H \\times W \\times C}')
('3.0', '\\mathbf{x}_t')
('3.0', '\\mathbf{x}_{t-1}')
('3.0', '\\mathbf{x}_0')
('3.0', '\\begin{aligned}\n\\mathbf{x}^{\\text{src}}_{t+1} = \\sqrt{\\alpha_{t+1}} f_\\theta(\\mathbf{x}^{\\text{src}}_{t}, t, \\mathbf{y}^{\\text{src}}) + \\sqrt{1-\\alpha_{t+1}} \\epsilon_\\theta(\\mathbf{x}^{\\text{src}}_t, t, \\mathbf{y}^{\\text{src}}), \n\\label{eq:DDIM_forward}\n%\\; \\text{where} \\fth(\\bxsrc_{t}, t, \\bysrc) = \\frac{\\bxsrc_t - \\sqrt{1-\\at}}{\\sqrt{\\at}}\n\\end{aligned}')
('3.0', '\\mathbf{x}^{\\text{src}}_t')
('3.0', '\\mathbf{y}^{\\text{src}}')
('3.0', '\\mathbf{x}^{\\text{src}}')
('3.0', 'p^{\\text{src}}')
('3.0', '\\alpha_t\\in (0, 1]')
('3.0', '\\epsilon_\\theta(\\cdot, \\cdot, \\cdot)')
('3.0', 'f_\\theta(\\cdot, \\cdot, \\cdot)')
('3.0', '\\begin{aligned}\nf_\\theta(\\mathbf{x}_{t}, t, \\mathbf{y})  := \\frac{\\mathbf{x}_t - \\sqrt{1-\\alpha_t} \\epsilon_\\theta(\\mathbf{x}_t, t,\\mathbf{y})}{\\sqrt{\\alpha_t}}.\n\\label{eq:f_theta}\n\\end{aligned}')
('3.0', '\\mathbf{x}^{\\text{src}}_T')
('3.0', '\\mathbf{x}^{\\text{tgt}}')
('3.0', '\\mathbf{x}^{\\text{src}}')
('3.0', '\\mathbf{x}_t')
('3.0', '\\mathbf{x}^{\\text{tgt}}')
('3.0', '\\mathbf{x}^{\\text{src}}')
('3.1', '\\mathbf{x}^{\\text{tgt}}_0')
('3.1', '\\mathbf{x}^{\\text{tgt}}_T')
('3.1', '\\mathbf{x}^{\\text{src}}_T')
('3.1', '\\begin{aligned}\n\\mathbf{x}^{\\text{tgt}}_{t-1} =  \\sqrt{\\alpha_{t-1}} f_\\theta(\\mathbf{x}^{\\text{tgt}}_{t}, t, \\mathbf{y}^{\\text{tgt}}) + \\sqrt{1-\\alpha_{t-1}} \\epsilon_\\theta(\\mathbf{x}^{\\text{tgt}}_t, t, \\mathbf{y}^{\\text{tgt}}).\n\\label{eq:naive_target}\n\\end{aligned}')
('3.1', '\\mathbf{x}^{\\text{src}}_t')
('3.1', '\\mathbf{x}^{\\text{tgt}}_t')
('3.1', '\\psi_\\theta(\\mathbf{x}^{\\text{src}}_t, t, \\mathbf{y}^{\\text{src}})')
('3.1', '\\mathbf{x}^{\\text{tgt}}_t')
('3.1', '\\mathbf{x}^{\\text{src}}_t')
('3.1', '\\mathbf{x}^{\\text{tgt}}_t')
('4.0', '\\begin{aligned}\n\\mathbf{x}^{\\text{tgt}}_{t-1} &= \\frac{\\sqrt{\\alpha_{t-1}}}{\\sqrt{\\alpha_t}} \\mathbf{x}^{\\text{tgt}}_t - \\sqrt{1-\\alpha_t} \\gamma_t \\epsilon_\\theta(\\mathbf{x}^{\\text{tgt}}_t, t, \\mathbf{y}^{\\text{tgt}}) \\\\ \n& \\approx \\frac{\\sqrt{\\alpha_{t-1}}}{\\sqrt{\\alpha_t}} \\mathbf{x}^{\\text{tgt}}_t +  (1-\\alpha_t) \\gamma_t  \\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p(\\mathbf{x}^{\\text{tgt}}_t | \\mathbf{y}^{\\text{tgt}}), \n\\label{eq:reverse_ddim_score} \n\\end{aligned}')
('4.0', '\\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p(\\mathbf{x}^{\\text{tgt}}_t | \\mathbf{y}^{\\text{tgt}}) \\approx -\\frac{1}{\\sqrt{1-\\alpha_t}} \\epsilon_\\theta(\\mathbf{x}^{\\text{tgt}}_t, t, \\mathbf{y}^{\\text{tgt}})~~\\text{and }~ \\gamma_t = \\sqrt{ \\frac{\\alpha_{t-1}} {\\alpha_t}   } - \\sqrt{ \\frac{1-\\alpha_{t-1}} {1-\\alpha_t}}.\n \\label{eq:def_score_gamma_t}')
('4.0', '\\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p(\\mathbf{x}^{\\text{tgt}}_t | \\mathbf{y}^{\\text{tgt}})')
('4.0', '\\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p (\\mathbf{x}^{\\text{tgt}}_t | \\mathbf{x}^{\\text{src}}, \\mathbf{y}^{\\text{tgt}}, \\mathbf{y}^{\\text{src}})')
('4.1', '\\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p (\\mathbf{x}^{\\text{tgt}}_t| \\mathbf{x}^{\\text{src}}, \\mathbf{y}^{\\text{tgt}}, \\mathbf{y}^{\\text{src}})')
('4.1', '\\begin{aligned}\n \\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p (\\mathbf{x}^{\\text{tgt}}_t | \\mathbf{x}^{\\text{src}}, \\mathbf{y}^{\\text{tgt}}, \\mathbf{y}^{\\text{src}}) &= \\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log \\int p (\\mathbf{x}^{\\text{tgt}}_t, \\mathbf{x}^{\\text{src}}_t | \\mathbf{x}^{\\text{src}}, \\mathbf{y}^{\\text{tgt}}, \\mathbf{y}^{\\text{src}}) \\; d \\mathbf{x}^{\\text{src}}_t  \\nonumber \\\\\n&= \\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log \\int p (\\mathbf{x}^{\\text{tgt}}_t |  \\mathbf{x}^{\\text{src}}_t , \\mathbf{x}^{\\text{src}}, \\mathbf{y}^{\\text{tgt}}, \\mathbf{y}^{\\text{src}}) \\cdot p (\\mathbf{x}^{\\text{src}}_t | \\mathbf{x}^{\\text{src}}, \\mathbf{y}^{\\text{tgt}}, \\mathbf{y}^{\\text{src}}) \\; d \\mathbf{x}^{\\text{src}}_t \\nonumber \\\\ \n&= \\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log \\int p (\\mathbf{x}^{\\text{tgt}}_t |  \\mathbf{x}^{\\text{src}}_t, \\mathbf{y}^{\\text{tgt}}) \\cdot p (\\mathbf{x}^{\\text{src}}_t | \\mathbf{x}^{\\text{src}},  \\mathbf{y}^{\\text{src}}) \\; d \\mathbf{x}^{\\text{src}}_t  \\label{eq:cs_approx1} \\\\ \n%&\\approx \\nabla_{x^t_{\\text{tgt}}} \\log  p (x^t_{\\text{tgt}, } |  \\hat{x}^t_{\\text{src}}, y_{\\text{tgt}}, y_{\\text{src}})\n&\\approx \\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log  p (\\mathbf{x}^{\\text{tgt}}_t |  \\hat{\\mathbf{x}}^{\\text{src}}_t, \\mathbf{y}^{\\text{tgt}}).\n\\label{eq:cs_approx2}\n\\end{aligned}')
('4.1', '\\mathbf{x}^{\\text{tgt}}_t')
('4.1', '\\mathbf{y}^{\\text{src}}')
('4.1', '\\mathbf{x}^{\\text{src}}')
('4.1', '\\mathbf{x}^{\\text{src}}_t')
('4.1', '\\mathbf{y}^{\\text{tgt}}')
('4.1', '\\hat{\\mathbf{x}}^{\\text{src}}_t')
('4.1', 'p (\\mathbf{x}^{\\text{src}}_t | \\mathbf{x}^{\\text{src}},  \\mathbf{y}^{\\text{src}})')
('4.1', '\\begin{aligned}\n\\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log  p (\\mathbf{x}^{\\text{tgt}}_t |  \\hat{\\mathbf{x}}^{\\text{src}}_t, \\mathbf{y}^{\\text{tgt}}) = \\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p(\\mathbf{x}^{\\text{tgt}}_t | \\mathbf{y}^{\\text{tgt}}) + \\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p ( \\hat{\\mathbf{x}}^{\\text{src}}_t | \\mathbf{x}^{\\text{tgt}}_t, \\mathbf{y}^{\\text{tgt}}),\n\\label{eq:conditional_score}\n\\end{aligned}')
('4.1', '\\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p(\\mathbf{x}^{\\text{tgt}}_t | \\mathbf{y}^{\\text{tgt}})')
('4.1', '\\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p (\\mathbf{x}^{\\text{tgt}}_t | \\mathbf{x}^{\\text{src}}, \\mathbf{y}^{\\text{tgt}}, \\mathbf{y}^{\\text{src}}) \\approx  \\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p(\\mathbf{x}^{\\text{tgt}}_t | \\mathbf{y}^{\\text{tgt}}) + \\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p ( \\hat{\\mathbf{x}}^{\\text{src}}_t | \\mathbf{x}^{\\text{tgt}}_t, \\mathbf{y}^{\\text{tgt}}).\n\\label{eq:final_conditional_score}')
('4.1', '\\mathbf{M}^{\\text{src}}[k]')
('4.1', '\\mathbf{\\hat{M}}^\\text{src}[k]')
('4.1', 'k^{\\text{th}}')
('4.2', '\\mathbf{P}^\\text{src}\\in (0, 1)^{H \\times W}')
('4.2', '\\mathbf{M}^\\text{src}\\in \\mathbb{R}^{L \\times H \\times W}')
('4.2', '\\{ \\mathbf{M}^\\text{src}_t \\}_{t=1:T}')
('4.2', '\\mathbf{x}^{\\text{src}}_t')
('4.2', '\\mathbf{M}^{\\text{src}}[k]\\in \\mathbb{R}^{H \\times W}')
('4.2', 'k^{\\text{th}}')
('4.2', '\\mathbf{M}^{\\text{src}}[k]')
('4.2', '\\mathbf{M}^{\\text{src}}[k]')
('4.2', '\\mathbf{A}^\\text{src}\\in \\mathbb{R}^{H \\times W \\times H \\times W}')
('4.2', 'k^\\text{th}')
('4.2', '\\mathbf{\\hat{M}}^\\text{src}[k] \\in \\mathbb{R}^{H \\times W}')
('4.2', '\\begin{aligned}\n\\mathbf{\\hat{M}}^\\text{src}[k][h,w] :=  \\text{tr} \\left(\\mathbf{A}^\\text{src}[h, w] (\\mathbf{M}^{\\text{src}}[k])^T \\right),\n%=\\text{sum} (\\A^{h,w} \\odot \\M) \n%\\Mh_k^i = \\sum_{h=1}^H \\sum_{w=1}^W A^{h, w}\n\\label{eq:smooth_mask} \n\\end{aligned}')
('4.2', '\\text{tr}(\\cdot)')
('4.2', '[h,w]')
('4.2', '\\mathbf{P}^\\text{src}\\in \\mathbb{R}^{H \\times W}')
('4.2', '\\begin{aligned}\n\\mathbf{P}^\\text{src}:= \\mathbf{1} - \\mathbf{\\hat{M}}^\\text{src}[k], \n\\label{eq:backgroundmask_def}\n\\end{aligned}')
('4.2', '\\mathbf{1} \\in \\mathbb{R}^{H \\times W}')
('4.2', '\\mathbf{P}^\\text{src}')
('4.2', '\\mathbf{P}^\\text{src}')
('4.2', '\\ell^{\\text{th}}')
('4.2', '\\mathbf{\\hat{M}}^\\text{tgt}_t[\\ell] := \\mathbf{M}^\\text{src}_t[\\ell] \\odot \\mathbf{P}^\\text{src}+ \\mathbf{M}^\\text{tgt}_t[\\ell] \\odot (\\mathbf{1} - \\mathbf{P}^\\text{src}),\n\t\\label{eq:mixup_def}\n\t%\\label{eq:naive_target}')
('4.2', '\\odot')
('4.2', '\\mathbf{M}^\\text{tgt}_t')
('4.2', '\\mathbf{x}^{\\text{tgt}}_t')
('4.2', '\\hat{\\epsilon}_\\theta(\\mathbf{x}^{\\text{tgt}}_t, t, \\mathbf{y}^{\\text{tgt}})')
('4.2', '\\mathbf{\\hat{M}}^\\text{tgt}_t')
('4.2', '\\mathbf{M}^\\text{tgt}_t')
('4.2', 't')
('4.2', '\\mathbf{\\Omega}_t')
('4.2', 't=T')
('4.2', 't=1')
('4.2', '\\mathbf{\\Omega}_t')
('4.2', 't')
('4.2', '\\mathbf{x}^{\\text{src}}')
('4.2', '\\mathbf{y}^{\\text{src}}')
('4.2', '\\mathbf{y}^{\\text{tgt}}')
('4.2', '\\lambda^\\text{pre}')
('4.2', '\\mathbf{x}^{\\text{src}}_0 \\gets \\mathbf{x}^{\\text{src}}')
('4.2', '\\mathbf{x}^{\\text{src}}_{t+1}')
('4.2', '\\mathbf{M}^\\text{src}_t')
('4.2', '\\mathbf{A}^\\text{src}_t')
('4.2', '\\mathbf{x}^{\\text{tgt}}_T \\gets \\mathbf{x}^{\\text{src}}_T')
('4.2', '\\mathbf{M}^\\text{src}')
('4.2', '\\mathbf{A}^\\text{src}')
('4.2', '\\mathbf{M}^\\text{src}_t')
('4.2', '\\mathbf{A}^\\text{src}_t')
('4.2', '\\mathbf{\\hat{M}}^\\text{src}')
('4.2', '\\mathbf{M}^\\text{src}')
('4.2', '\\mathbf{A}^\\text{src}')
('4.2', '\\mathbf{P}^\\text{src}\\gets \\mathbf{1} - \\mathbf{\\hat{M}}^\\text{src}')
('4.2', '\\hat{\\epsilon}_\\theta(\\mathbf{x}^{\\text{tgt}}_t, t, \\mathbf{y}^{\\text{tgt}})')
('4.2', '\\gamma_t \\gets \\sqrt{ \\frac{\\alpha_{t-1}} {\\alpha_t}   } - \\sqrt{ \\frac{1-\\alpha_{t-1}} {1-\\alpha_t}}')
('4.2', '\\mathbf{\\Omega}_t')
('4.2', '\\hat{\\mathbf{x}}^{\\text{src}}_t \\gets \\mathbf{x}^{\\text{src}}_t')
('4.2', '\\mathbf{x}^{\\text{tgt}}_{t-1} \\gets \\sqrt{\\alpha_{t-1}} \\Big( \\frac{\\mathbf{x}^{\\text{tgt}}_t - \\sqrt{1-\\alpha_t} \\hat{\\epsilon}_\\theta(\\mathbf{x}^{\\text{tgt}}_t, t, \\mathbf{y}^{\\text{tgt}})}{\\sqrt{\\alpha_t}} \\Big)  + \\sqrt{1-\\alpha_{t-1}} \\hat{\\epsilon}_\\theta(\\mathbf{x}^{\\text{tgt}}_t, t, \\mathbf{y}^{\\text{tgt}}) - \\gamma_{t} \\mathbf{\\Omega}_t (\\mathbf{x}^{\\text{tgt}}_t - \\hat{\\mathbf{x}}^{\\text{src}}_t)')
('4.2', '\\mathbf{x}^{\\text{tgt}}\\gets \\mathbf{x}^{\\text{tgt}}_0')
('4.2', '\\mathbf{x}^{\\text{tgt}}')
('4.3', '\\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p ( \\hat{\\mathbf{x}}^{\\text{src}}_t | \\mathbf{x}^{\\text{tgt}}_t, \\mathbf{y}^{\\text{tgt}})')
('4.3', 'p ( \\hat{\\mathbf{x}}^{\\text{src}}_t | \\mathbf{x}^{\\text{tgt}}_t, \\mathbf{y}^{\\text{tgt}})')
('4.3', '\\mathbf{\\Omega}_t \\in \\mathbb{R}^{HW \\times HW}')
('4.3', 'p ( \\hat{\\mathbf{x}}^{\\text{src}}_t | \\mathbf{x}^{\\text{tgt}}_t, \\mathbf{y}^{\\text{tgt}}) \\sim \\mathcal{N}(\\mathbf{x}^{\\text{tgt}}_t, (1-\\alpha_t) \\mathbf{\\Omega}_t^{-1} )')
('4.3', '\\begin{aligned}\n\\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p(\\hat{\\mathbf{x}}^{\\text{src}}_t| \\mathbf{x}^{\\text{tgt}}_t, \\mathbf{y}^{\\text{tgt}}) = -\\frac{\\mathbf{\\Omega}_t (\\mathbf{x}^{\\text{tgt}}_t- \\hat{\\mathbf{x}}^{\\text{src}}_t )}{1-\\alpha_t},\n\\label{eq:grad_posterior}\n\\end{aligned}')
('4.3', '\\mathbf{\\Omega}_t')
('4.3', '\\mathbf{P}^\\text{src}')
('4.3', '\\lambda^\\text{pre}')
('4.3', '\\mathbf{\\Omega}_t')
('4.3', '\\mathbf{\\Omega}_t')
('4.3', '\\begin{aligned}\n\\text{Diag}(\\mathbf{\\Omega}_t) := \\lambda^\\text{pre} \\cdot \\text{Vec}(\\mathbf{B}_t \\odot \\mathbf{P}^\\text{src}),\n%\\pre_t[(h-1)W+w, (h-1)W+w] = \\lambda^\\text{pre} \\cdot \\B_t[h,w] \\cdot \\bPsrc[h,w],\n\\label{eq:pre_def}\n\\end{aligned}')
('4.3', '(\\cdot)')
('4.3', '(\\cdot)')
('4.3', '\\mathbf{B}_t \\in \\mathbb{R}^{H \\times W}')
('4.3', 't')
('4.3', '\\mathbf{P}^\\text{src}')
('4.3', '\\begin{aligned}\n\\mathbf{B}_{t} [h, w] := \\mathbb{I} \\left[ \\mathbf{P}^\\text{src}[h, w] \\geq 1- \\text{cos} \\left(\\frac{\\pi (T-t)}{T \\delta}\\right) \\right] %\\\\\n%\\label{eq:binary_mask}\n\\end{aligned}')
('4.3', '\\mathbb{I} [ \\cdot ]')
('4.3', '[h,w]')
('4.3', '\\delta')
('4.3', '1.5')
('4.3', '\\mathbf{B}_t')
('4.3', 'p ( \\hat{\\mathbf{x}}^{\\text{src}}_t | \\mathbf{x}^{\\text{tgt}}_t, \\mathbf{y}^{\\text{tgt}})')
('4.3', '\\mathbf{x}^{\\text{tgt}}_t')
('4.3', '\\mathbf{B}_t')
('4.3', 't')
('4.3', '0')
('4.4', '\\begin{aligned}\n\\mathbf{x}^{\\text{tgt}}_{t-1} \\approx \\frac{\\sqrt{\\alpha_{t-1}}}{\\sqrt{\\alpha_t}} \\mathbf{x}^{\\text{tgt}}_t +  (1-\\alpha_t) \\gamma_t \\left( \\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p(\\mathbf{x}^{\\text{tgt}}_t | \\mathbf{y}^{\\text{tgt}}) +  \\nabla_{\\mathbf{x}^{\\text{tgt}}_t} \\log p(\\hat{\\mathbf{x}}^{\\text{src}}_t| \\mathbf{x}^{\\text{tgt}}_t, \\mathbf{y}^{\\text{tgt}}) \\right), \n\\label{eq:reverse_csg_score} \n\\end{aligned}')
('4.4', '\\mathbf{x}^{\\text{tgt}}_{t-1} = \\sqrt{\\alpha_{t-1}} \\hat{f}_\\theta(\\mathbf{x}^{\\text{tgt}}_{t}, t, \\mathbf{y}^{\\text{tgt}}) + \\sqrt{1-\\alpha_{t-1}} \\hat{\\epsilon}_\\theta(\\mathbf{x}^{\\text{tgt}}_t, t, \\mathbf{y}^{\\text{tgt}}) -  \\gamma_t  \\mathbf{\\Omega}_t (\\mathbf{x}^{\\text{tgt}}_t- \\hat{\\mathbf{x}}^{\\text{src}}_t ),\n\\label{eq:proposed_conditional_guidance}')
('4.4', '\\epsilon_\\theta(\\mathbf{x}^{\\text{tgt}}_t, t, \\mathbf{y}^{\\text{tgt}})')
('4.4', '\\hat{\\epsilon}_\\theta(\\mathbf{x}^{\\text{tgt}}_t, t, \\mathbf{y}^{\\text{tgt}})')
('4.4', '\\mathbf{x}^{\\text{tgt}}_t')
('4.4', '\\hat{\\mathbf{x}}^{\\text{src}}_t')
('4.4', '\\mathbf{\\Omega}_t')
('5.0', '50')
('5.0', '50')
('5.1', '250')
('7.0', '\\begin{aligned}\n\\text{RD} = \\min_\\gamma  \\frac{1}{n} \\| G^\\text{tgt} - \\gamma G^\\text{src} \\|^2_F,\n\\end{aligned}')
('7.0', '\\| \\cdot \\|_F')
('7.0', 'G^\\text{tgt}')
('7.0', 'G^\\text{src}')
('7.0', 'n \\times n')
('7.0', 'G^\\text{tgt}[i,j]')
('7.0', 'i^\\text{th}')
('7.0', 'j^\\text{th}')
('7.0', 'G^\\text{tgt}')
('7.0', 'i^\\text{th}')
('7.0', 'j^\\text{th}')
('7.0', 'G^\\text{src}[i,j]')
('7.0', 'i^\\text{th}')
('7.0', 'j^\\text{th}')
