\S
q\left({\bm{x}}_{t}\mid{\bm{x}}_{t-1}\right)=\mathcal{N}\left({\bm{x}}_{t};%
\sqrt{1-\beta_{t}}{\bm{x}}_{t-1},\beta_{t}\mathbf{I}\right)=\mathcal{N}\left(%
\sqrt{\frac{\alpha_{t}}{\alpha_{t-1}}}{\bm{x}}_{t-1},\left(1-\frac{\alpha_{t}}%
{\alpha_{t-1}}\right)\bm{I}\right),
\{\beta_{t}\}^{T}_{t=1}
\alpha_{t}=\prod^{t}_{s=1}(1-\beta_{s})
p_{\theta}\left({\bm{x}}_{0:T}\right):=p\left({\bm{x}}_{T}\right)\prod_{t=1}^{%
T}p_{\theta}\left({\bm{x}}_{t-1}\mid{\bm{x}}_{t}\right)
{\bm{x}}_{T}\sim\mathcal{N}(0,\mathbf{I})
\bm{\epsilon}^{\theta}_{t}
{\bm{x}}_{t-1}=\frac{1}{\sqrt{1-\beta_{t}}}\left({\bm{x}}_{t}-\frac{\beta_{t}}%
{\sqrt{1-\alpha_{t}}}\bm{\epsilon}^{\theta}_{t}\left({\bm{x}}_{t}\right)\right%
)+\sigma_{t}{\bm{z}}_{t},
{\bm{z}}_{t}\sim\mathcal{N}(0,\mathbf{I})
\sigma_{t}^{2}
\sigma_{t}^{2}=\beta_{t}
q_{\sigma}({\bm{x}}_{t-1}|{\bm{x}}_{t},{\bm{x}}_{0})=\mathcal{N}(\sqrt{\alpha_%
{t-1}}{\bm{x}}_{0}+\sqrt{1-\alpha_{t-1}-\sigma_{t}^{2}}\cdot\frac{{\bm{x}}_{t}%
-\sqrt{\alpha_{t}}{\bm{x}}_{0}}{\sqrt{1-\alpha_{t}}},\sigma_{t}^{2}\bm{I})
{\bm{x}}_{t-1}=\sqrt{\alpha_{t-1}}\underbrace{\left(\frac{{\bm{x}}_{t}-\sqrt{1%
-\alpha_{t}}\bm{\epsilon}^{\theta}_{t}\left({\bm{x}}_{t}\right)}{\sqrt{\alpha_%
{t}}}\right)}_{\text{"predicted }{\bm{x}}_{0}\text{ " }}+\underbrace{\sqrt{1-%
\alpha_{t-1}-\sigma_{t}^{2}}\cdot\bm{\epsilon}^{\theta}_{t}\left({\bm{x}}_{t}%
\right)}_{\text{"direction pointing to }{\bm{x}}_{t}\text{ " }}+\underbrace{%
\sigma_{t}{\bm{z}}_{t}}_{\text{random noise }},
\sigma_{t}=\eta\sqrt{\left(1-\alpha_{t-1}\right)/\left(1-\alpha_{t}\right)}%
\sqrt{1-\alpha_{t}/\alpha_{t-1}}
\eta=1
t
\eta=0
E_{I}
E_{T}
\mathcal{L}_{\text{direction }}\left({\bm{x}}^{\mathrm{edit}},y^{\mathrm{%
target}};{\bm{x}}^{\mathrm{source}},y^{\mathrm{source}}\right):=1-\frac{\Delta
I%
\cdot\Delta T}{\|\Delta I\|\|\Delta T\|},
\Delta T=E_{T}\left(y^{\mathrm{target}}\right)-E_{T}\left(y^{\mathrm{source}}\right)
\Delta I=E_{I}\left({\bm{x}}^{\mathrm{edit}}\right)-E_{I}\left({\bm{x}}^{%
\mathrm{source}}\right)
{\bm{x}}^{\mathrm{edit}}
y^{\mathrm{target}}
{\bm{x}}^{\mathrm{source}}
y^{\mathrm{source}}
{\bm{x}}_{t-1}=\sqrt{\alpha_{t-1}}\ \mathbf{P}_{t}(\bm{\epsilon}^{\theta}_{t}(%
{\bm{x}}_{t}))+\mathbf{D}_{t}(\bm{\epsilon}^{\theta}_{t}({\bm{x}}_{t}))+\sigma%
_{t}{\bm{z}}_{t},
\mathbf{P}_{t}(\bm{\epsilon}^{\theta}_{t}({\bm{x}}_{t}))
{\bm{x}}_{0}
\mathbf{D}_{t}(\bm{\epsilon}^{\theta}_{t}({\bm{x}}_{t}))
{\bm{x}}_{t}
\sigma_{t}{\bm{z}}_{t}
\eta\neq 0
\mathbf{P}_{t}(\bm{\epsilon}^{\theta}_{t}({\bm{x}}_{t}))
\mathbf{P}_{t}
\mathbf{D}_{t}(\bm{\epsilon}^{\theta}_{t}({\bm{x}}_{t}))
\mathbf{D}_{t}
{\bm{x}}_{0}
{\bm{x}}_{T}
{\bm{x}}_{0}
{\bm{x}}_{T}
\bm{\epsilon}^{\theta}_{t}
{\bm{x}}_{0}
\mathbf{P}_{t}
\mathbf{D}_{t}
p_{\theta}({\bm{x}}_{0:T})
\bm{\epsilon}^{\theta}_{t}
t
\tilde{\bm{\epsilon}}^{\theta}_{t}
\Delta{\bm{x}}_{t}=\tilde{{\bm{x}}}_{t-1}-{\bm{x}}_{t-1}
\tilde{{\bm{x}}}_{t-1}=\sqrt{\alpha_{t-1}}\ \mathbf{P}_{t}(\tilde{\bm{\epsilon%
}}^{\theta}_{t}({\bm{x}}_{t}))+\mathbf{D}_{t}(\tilde{\bm{\epsilon}}^{\theta}_{%
t}({\bm{x}}_{t}))
\tilde{\bm{\epsilon}}^{\theta}_{t}
\mathbf{P}_{t}
\mathbf{D}_{t}
\tilde{{\bm{x}}}_{0}
{\bm{x}}_{0}
{\bm{x}}_{t-1}=\sqrt{\alpha_{t-1}}\ \mathbf{P}_{t}(\tilde{\bm{\epsilon}}^{%
\theta}_{t}({\bm{x}}_{t}))+\mathbf{D}_{t}(\bm{\epsilon}^{\theta}_{t}({\bm{x}}_%
{t})),
\mathbf{P}_{t}
\bm{\epsilon}^{\theta}_{t}
\tilde{\bm{\epsilon}}^{\theta}_{t}
\mathbf{D}_{t}
\Delta\bm{\epsilon}_{t}=\tilde{\bm{\epsilon}}^{\theta}_{t}-\bm{\epsilon}^{%
\theta}_{t}
{\bm{x}}_{t}
{\bm{x}}_{t-1}
\mathbf{D}_{t}
\mathbf{P}_{t}^{\mathrm{edit}}
\mathbf{P}_{t}^{\mathrm{source}}
\mathbf{P}_{t}^{\mathrm{edit}}
\mathbf{P}_{t}^{\mathrm{source}}
\Delta\bm{\epsilon}=\operatorname*{arg\,min}_{\Delta\bm{\epsilon}}{\mathop{%
\mathbb{E}}_{t}\mathcal{L}^{(t)}}
\mathcal{L}^{(t)}=\lambda_{\mathrm{CLIP}}\mathcal{L}_{\text{direction}}\left(%
\mathbf{P}_{t}^{\mathrm{edit}},y^{\mathrm{ref}};\mathbf{P}_{t}^{\mathrm{source%
}},y^{\mathrm{source}}\right)+\lambda_{\mathrm{recon}}\left|\mathbf{P}_{t}^{%
\mathrm{edit}}-\mathbf{P}_{t}^{\mathrm{source}}\right|
\Delta\bm{\epsilon}
{\bm{x}}_{0}^{\mathrm{edit}}
\bm{\epsilon}
\mathbf{P}_{t}{}
\mathbf{D}_{t}{}
\mathbf{P}_{t}{}
\mathbf{D}_{t}{}
\bm{\epsilon}^{\theta}_{t}
{\bm{h}}_{t}
\bm{\epsilon}^{\theta}_{t}
{\bm{h}}_{t}
\bm{\epsilon}^{\theta}_{t}
{\bm{x}}_{t-1}=\sqrt{\alpha_{t-1}}\ \mathbf{P}_{t}(\bm{\epsilon}^{\theta}_{t}(%
{\bm{x}}_{t}|\Delta{\bm{h}}_{t}))+\mathbf{D}_{t}(\bm{\epsilon}^{\theta}_{t}({%
\bm{x}}_{t}))+\sigma_{t}{\bm{z}}_{t},
\bm{\epsilon}^{\theta}_{t}({\bm{x}}_{t}|\Delta{\bm{h}}_{t})
\Delta{\bm{h}}_{t}
{\bm{h}}_{t}
\Delta{\bm{h}}_{t}
\mathbf{P}_{t}(\bm{\epsilon}^{\theta}_{t}({\bm{x}}_{t}|\Delta{\bm{h}}_{t}))
\mathbf{P}_{t}(\tilde{\bm{\epsilon}}^{\theta}_{t}({\bm{x}}_{t}))
\Delta{\bm{h}}
\Delta{\bm{h}}
\Delta{\bm{h}}
\Delta{\bm{h}}
\Delta{\bm{h}}_{t}
t
\S
\Delta{\bm{h}}
\Delta{\bm{h}}_{t}
{\bm{f}}_{t}({\bm{h}}_{t})
\Delta{\bm{h}}_{t}
{\bm{h}}_{t}
t
{\bm{f}}_{t}
1\times 1
t
\mathbf{P}_{t}^{\mathrm{edit}}=\mathbf{P}_{t}(\bm{\epsilon}^{\theta}_{t}({\bm{%
x}}_{t}|{\bm{f}}_{t}))
{\bm{f}}_{t}
\Delta{\bm{h}}_{t}
{\bm{f}}_{t}
\{{\bm{x}}_{\tau_{i}}\}_{\forall i\in[1,S]}
\{\tau_{i}\}
[1,...,T]
S<T
\{\tilde{\tau}_{i}\}
\tilde{S}<T
\Delta\tilde{{\bm{h}}}_{\tilde{\tau}}={\bm{f}}_{\tilde{\tau}}({\bm{h}}_{\tilde%
{\tau}})S/\tilde{S}
\sum\Delta{\bm{h}}_{t}
\Delta\tilde{{\bm{h}}}_{\tilde{\tau}}\tilde{S}=\Delta{\bm{h}}_{t}S
{\bm{f}}_{t}
{\bm{f}}_{t}
\Delta{\bm{h}}_{t}
[T,t]
T
t
[T,t]
\mathbf{P}_{t}
{\bm{x}}
\mathrm{LPIPS}({\bm{x}},\mathbf{P}_{t})=0.33
[t,0]
t
t
{\bm{x}}_{t}
[t,0]
\mathrm{LPIPS}({\bm{x}},{\bm{x}}_{t})=1.2
[T,t]
T
t
[T,t]
\mathbf{P}_{t}
{\bm{x}}
\mathrm{LPIPS}({\bm{x}},\mathbf{P}_{t})=0.33
[t,0]
t
t
{\bm{x}}_{t}
[t,0]
\mathrm{LPIPS}({\bm{x}},{\bm{x}}_{t})=1.2
[T,t_{\mathrm{edit}}]
\mathrm{LPIPS}({\bm{x}},\mathbf{P}_{T})
\mathrm{LPIPS}({\bm{x}},\mathbf{P}_{t})
T
t
\mathrm{LPIPS}
[T,t]
\xi_{t}=\mathrm{LPIPS}({\bm{x}},\mathbf{P}_{T})-\mathrm{LPIPS}({\bm{x}},%
\mathbf{P}_{t})
T
t
\mathrm{LPIPS}({\bm{x}},\cdot)
\mathbf{P}_{t}
{\bm{x}}_{t}
\xi_{t}
t_{\mathrm{edit}}
\mathrm{LPIPS}({\bm{x}},\mathbf{P}_{t_{\mathrm{edit}}})=0.33
\mathbf{P}_{t_{\mathrm{edit}}}
{\bm{x}}
>
\xi_{t}
\delta=0.33d(E_{T}(y_{\mathrm{source}}),E_{T}(y_{\mathrm{target}}))
E_{T}(\cdot)
y_{(\cdot)}
d(\cdot,\cdot)
t_{\mathrm{edit}}
\mathrm{LPIPS}({\bm{x}},\mathbf{P}_{t_{\mathrm{edit}}})=0.33-\delta
\eta=0
[t_{\mathrm{boost}},0]
t
\gamma_{t}=\mathrm{LPIPS}({\bm{x}},{\bm{x}}_{t})
{\bm{x}}_{t}
{\bm{x}}_{t}
\mathbf{P}_{t}
t_{\mathrm{boost}}
\gamma_{t_{\mathrm{boost}}}=1.2
[t_{\mathrm{boost}},0]
t_{\mathrm{boost}}
\mathrm{LPIPS}({\bm{x}},{\bm{x}}_{t})
\mathrm{LPIPS}({\bm{x}},\mathbf{P}_{t})
t_{\mathrm{edit}}
t_{\mathrm{boost}}
p_{\theta}^{(t)}\left(\bm{x}_{t-1}\mid\bm{x}_{t}\right)=\begin{cases}\mathcal{%
N}\left(\sqrt{\alpha_{t-1}}\ \mathbf{P}_{t}(\bm{\epsilon}^{\theta}_{t}({\bm{x}%
}_{t}|{\bm{f}}_{t}))+\mathbf{D}_{t},\sigma_{t}^{2}\bm{I}\right),\ \eta=0&\text%
{ if }T\geq t\geq t_{\mathrm{edit}}\\
\mathcal{N}\left(\sqrt{\alpha_{t-1}}\ \mathbf{P}_{t}(\bm{\epsilon}^{\theta}_{t%
}({\bm{x}}_{t}))+\mathbf{D}_{t},\sigma_{t}^{2}\bm{I}\right),\ \eta=0&\text{ if%
 }t_{\mathrm{edit}}>t\geq t_{\mathrm{boost}}\\
\mathcal{N}\left(\sqrt{\alpha_{t-1}}\ \mathbf{P}_{t}(\bm{\epsilon}^{\theta}_{t%
}({\bm{x}}_{t}))+\mathbf{D}_{t},\sigma_{t}^{2}\bm{I}\right),\ \eta=1&\text{ if%
 }t_{\mathrm{boost}}>t\par\end{cases}
\S
\S
\S
\lambda_{\mathrm{CLIP}}
\lambda_{\mathrm{recon}}
{\bm{f}}_{t}
S=40
{\bm{x}}_{T}\sim\mathcal{N}(0,\bm{I})
\tilde{S}=1,000
\xrightarrow{}
\S
\S
\bm{\epsilon}
\Delta{\bm{h}}_{t}
\Delta\bm{\epsilon}_{t}
\Delta{\bm{h}}_{t}
\Delta\bm{\epsilon}_{t}
\Delta\bm{\epsilon}_{t}
\bm{\epsilon}
\Delta{\bm{h}}_{t}
\Delta\bm{\epsilon}_{t}
\Delta{\bm{h}}_{t}
\Delta\bm{\epsilon}_{t}
\Delta\bm{\epsilon}_{t}
\Delta h^{\texttt{smiling}}_{t}
\Delta h^{smiling}_{t}
{\bm{f}}_{t}
\Delta h^{\texttt{smiling}}_{t}
\Delta h^{smiling}_{t}
{\bm{f}}_{t}
\S
S_{\mathrm{dir}}
\bm{\epsilon}
\Delta{\bm{h}}_{t}
\Delta\bm{\epsilon}_{t}
\Delta{\bm{h}}_{t}^{\mathrm{mean}}=\frac{1}{N}\sum\Delta{\bm{h}}_{t}^{i}
i
N=20
\Delta{\bm{h}}
\Delta{\bm{h}}
\bm{\epsilon}
\Delta{\bm{h}}_{t}^{\texttt{smiling}}
\Delta\bm{\epsilon}_{t}^{\texttt{smiling}}
\bm{\epsilon}
\bm{\epsilon}
\Delta{\bm{h}}_{t}^{\texttt{smiling}}
\Delta\bm{\epsilon}_{t}^{\texttt{smiling}}
\bm{\epsilon}
\Delta{\bm{h}}_{t}
\Delta{\bm{h}}_{t}^{\mathrm{mean}}
\Delta{\bm{h}}^{\mathrm{global}}
\Delta{\bm{h}}_{t}
\S
\Delta{\bm{h}}_{t}
\Delta{\bm{h}}_{t}^{\mathrm{mean}}
\Delta{\bm{h}}^{\mathrm{global}}
\Delta{\bm{h}}_{t}
\S
\Delta{\bm{h}}
\Delta{\bm{h}}
\bm{\epsilon}
\Delta{\bm{h}}_{t}
\Delta\bm{\epsilon}_{t}
\bm{\epsilon}
\Delta{\bm{h}}_{t}
\Delta{\bm{h}}_{t}^{\mathrm{mean}}
\Delta{\bm{h}}^{\mathrm{global}}=\frac{1}{T_{e}}\sum_{t}\Delta{\bm{h}}_{t}^{%
\mathrm{mean}}
\Delta{\bm{h}}_{t}
T_{e}
[T,t_{\mathrm{edit}}]
\Delta{\bm{h}}_{t}
\Delta{\bm{h}}_{t}^{\mathrm{mean}}
\Delta{\bm{h}}^{\mathrm{global}}
w
w^{+}
\S
\mathbf{P}_{t}
\mathbf{D}_{t}
\bm{\epsilon}^{\theta}_{t}
t
\tilde{\bm{\epsilon}}^{\theta}_{t}
\Delta{\bm{x}}_{t}=\tilde{{\bm{x}}}_{t-1}-{\bm{x}}_{t-1}
\tilde{{\bm{x}}}_{t-1}=\sqrt{\alpha_{t-1}}\ \mathbf{P}_{t}(\tilde{\bm{\epsilon%
}}^{\theta}_{t}({\bm{x}}_{t}))+\mathbf{D}_{t}(\tilde{\bm{\epsilon}}^{\theta}_{%
t}({\bm{x}}_{t}))
\tilde{\bm{\epsilon}}^{\theta}_{t}({\bm{x}}_{t})=\bm{\epsilon}^{\theta}_{t}({%
\bm{x}}_{t})+\Delta\bm{\epsilon}_{t}
\{\beta_{t}\}^{T}_{t=1}=\{\beta_{1}=\beta_{\text{min}},...,\beta_{T}=\beta_{%
\text{max}}\}
\alpha_{t}=\prod^{t}_{s=1}(1-\beta_{s})
\beta_{\text{max}}
\beta_{\text{max}}=0.001
\{\beta_{t}\}^{T}_{t=1}
\beta_{T}=\beta_{\text{max}}
\beta_{1}=\beta_{\text{min}}\approx 0
\beta_{\text{min}}=0.00001
\tilde{{\bm{x}}}_{t-1}=\sqrt{\alpha_{t-1}}\ \mathbf{P}_{t}(\tilde{\bm{\epsilon%
}}^{\theta}_{t}({\bm{x}}_{t}))+\mathbf{D}_{t}(\tilde{\bm{\epsilon}}^{\theta}_{%
t}({\bm{x}}_{t}))
=\sqrt{\alpha_{t-1}}\left(\frac{{\bm{x}}_{t}-\sqrt{1-\alpha_{t}}\left(\bm{%
\epsilon}^{\theta}_{t}({\bm{x}}_{t})+\Delta\bm{\epsilon}_{t}\right)}{\sqrt{%
\alpha_{t}}}\right)+\sqrt{1-\alpha_{t-1}}\cdot\left(\epsilon_{t}^{(\theta)}%
\left({\bm{x}}_{t}\right)+\Delta\bm{\epsilon}_{t}\right)
=\sqrt{\alpha_{t-1}}\ \mathbf{P}_{t}(\bm{\epsilon}^{\theta}_{t}({\bm{x}}_{t}))%
+\mathbf{D}_{t}(\bm{\epsilon}^{\theta}_{t}({\bm{x}}_{t}))-\frac{\sqrt{\alpha_{%
t-1}}\sqrt{1-\alpha_{t}}}{\sqrt{\alpha_{t}}}\cdot\Delta\bm{\epsilon}_{t}+\sqrt%
{1-\alpha_{t-1}}\cdot\Delta\bm{\epsilon}_{t}
={\bm{x}}_{t-1}+\left(-\frac{\sqrt{1-\alpha_{t}}}{\sqrt{1-\beta_{t}}}+\sqrt{1-%
\alpha_{t-1}}\right)\cdot\Delta\bm{\epsilon}_{t}
={\bm{x}}_{t-1}+\left(-\frac{\sqrt{1-\alpha_{t}}}{\sqrt{1-\beta_{t}}}+\frac{%
\sqrt{1-\prod_{s=1}^{t-1}\left(1-\beta_{s}\right)}\sqrt{1-\beta_{t}}}{\sqrt{1-%
\beta_{t}}}\right)\cdot\Delta\bm{\epsilon}_{t}
={\bm{x}}_{t-1}+\left(\frac{\sqrt{1-\alpha_{t}-\beta_{t}}-\sqrt{1-\alpha_{t}}}%
{\sqrt{1-\beta_{t}}}\right)\cdot\Delta\bm{\epsilon}_{t}\quad\because\alpha_{t}%
=\prod_{s=1}^{t}\left(1-\beta_{s}\right)
{\therefore\Delta{\bm{x}}_{t}=\tilde{{\bm{x}}}_{t-1}-{\bm{x}}_{t-1}=\left(%
\frac{\sqrt{1-\alpha_{t}-\beta_{t}}-\sqrt{1-\alpha_{t}}}{\sqrt{1-\beta_{t}}}%
\right)\cdot\Delta\bm{\epsilon}_{t}\text{ is negligible}\quad\because\beta_{t}%
<\beta_{max}}
\tilde{\bm{\epsilon}}_{t}=\bm{\epsilon}_{t}+\Delta{\bm{\epsilon}_{t}}
\mathbf{P}_{t}(\tilde{\epsilon}_{t})=
{\bm{x}}_{0}
\Delta{\bm{\epsilon}_{t}}
\mathbf{D}_{t}(\tilde{\bm{\epsilon}}_{t})
\Delta{\epsilon_{t}}
\Delta{\epsilon_{t}}
\mathbf{P}_{t}
\mathbf{D}_{t}
\tilde{\bm{\epsilon}}_{t}=\bm{\epsilon}_{t}+\Delta{\bm{\epsilon}_{t}}
\mathbf{P}_{t}(\tilde{\epsilon}_{t})=
{\bm{x}}_{0}
\Delta{\bm{\epsilon}_{t}}
\mathbf{D}_{t}(\tilde{\bm{\epsilon}}_{t})
\Delta{\epsilon_{t}}
\Delta{\epsilon_{t}}
\mathbf{P}_{t}
\mathbf{D}_{t}
\epsilon
\S
\mathbf{P}_{t}
\mathbf{D}_{t}
{\bm{x}}_{0}
\epsilon
\S
\bm{\epsilon}
z\sim\mathcal{N}(0,\mathbf{I})
\bm{\epsilon}
\bm{\epsilon}^{\theta}_{t}
z\sim\mathcal{N}(0,\sigma\mathbf{I})
\bm{\epsilon}^{\theta}_{t}
\tilde{\bm{\epsilon}}^{\theta}_{t}=(\bm{\epsilon}^{\theta}_{t}+z)/\sqrt{1^{2}+%
\sigma^{2}}
\tilde{\bm{\epsilon}}^{\theta}_{t}=\bm{\epsilon}^{\theta}_{t}+z
z
\mathbf{P}_{t}
\mathbf{D}_{t}
\bm{\epsilon}^{\theta}_{t}
z\sim\mathcal{N}
\bm{\epsilon}
z\sim\mathcal{N}
h
z
\mathbf{P}_{t}
\mathbf{D}_{t}
\bm{\epsilon}^{\theta}_{t}
z\sim\mathcal{N}
\bm{\epsilon}
z\sim\mathcal{N}
h
256\times 256
256\times 256
{\bm{f}}_{t}
\lambda_{CLIP}
\lambda_{recon}
{\bm{f}}_{t}
{\bm{f}}_{t}
{\bm{f}}_{t}
\Delta h_{t}
\Delta h_{t}
\Delta{\bm{h}}_{t}
\Delta{\bm{h}}_{t}
\S
\Delta{\bm{h}}_{t}
\Delta{\bm{h}}_{t}
\S
\Delta{\bm{h}}_{t}
\S
\Delta{\bm{h}}_{t}
\Delta{\bm{h}}_{t}
t_{edit}
t_{\mathrm{edit}}
t_{\mathrm{edit}}
t_{\mathrm{edit}}
t_{\mathrm{edit}}
t_{\mathrm{edit}}
\mathrm{LPIPS}=0.33
t_{\mathrm{edit}}
t_{\mathrm{edit}}
t_{\mathrm{edit}}
t_{\mathrm{edit}}
t_{\mathrm{edit}}
t_{\mathrm{edit}}
t_{\mathrm{boost}}
t_{\mathrm{edit}}
t_{\mathrm{boost}}
t_{\mathrm{edit}}
t_{\mathrm{boost}}
t_{\mathrm{boost}}
t_{\mathrm{edit}}
t_{\mathrm{boost}}
\mathrm{LPIPS}({\bm{x}},\mathbf{P}_{t})
\mathrm{LPIPS}({\bm{x}},{\bm{x}}_{t})
t_{\mathrm{edit}}
t_{\mathrm{boost}}
\S
t_{\mathrm{boost}}
\mathrm{LPIPS}({\bm{x}},\mathbf{P}_{t})
\mathrm{LPIPS}({\bm{x}},{\bm{x}}_{t})
\mathrm{LPIPS}({\bm{x}},\mathbf{P}_{t})
\mathrm{LPIPS}({\bm{x}},{\bm{x}}_{t})
\gamma_{t_{\mathrm{boost}}}
\gamma_{t_{\mathrm{boost}}}
\gamma_{t_{\mathrm{boost}}}
\gamma_{t_{\mathrm{boost}}}
\S
t_{\mathrm{boost}}
x_{0}
\{f^{i}_{t}\}^{M}_{i=1}
\{c_{i}\}^{M}_{i=1}
\epsilon_{\theta}
S_{for}
S_{gen}
t_{\mathrm{edit}}
\S
t_{\mathrm{boost}}
\S
x_{0}
\epsilon_{\theta}
\{c_{i}\}^{M}_{i=1}
S_{for}
S_{gen}
*
\{\tau_{s}\}^{S_{for}}_{s=1}
\tau_{1}=0
\tau_{S_{for}}=T
s=1,2,...,S_{for}-1
\epsilon\xleftarrow{}\epsilon_{\theta}(x_{\tau_{s}},\tau_{s})
x_{\tau_{s+1}}=\sqrt{\alpha_{\tau_{s}}}x_{\tau_{s}}+\sqrt{1-\alpha_{\tau_{s}}}\epsilon
\{\tilde{\tau}{}_{s}\}^{S_{gen}}_{s=1}
{\tilde{\tau}{}_{1}}=0
\tilde{\tau}{}_{S_{edit}}=t_{edit}
{\tilde{\tau}{}_{S_{noise}}}=t_{\mathrm{boost}}
{\tilde{\tau}{}_{S_{gen}}}=T
\tilde{x}{}_{\tilde{\tau}_{S_{gen}}}=x_{\tilde{\tau}_{S_{for}}}
s=S_{gen},S_{gen}-1,...,2
{s\geq S_{edit}}
h_{\tilde{\tau}{}_{s}}
\epsilon_{\theta}(\tilde{x}{}_{\tilde{\tau}{}_{s}})
\Delta{h}_{\tilde{\tau}{}_{s}}=\frac{S_{for}}{S_{gen}}(\sum_{i=1}^{M}c_{i}f^{i%
}_{\tilde{\tau}{}_{s}}(h_{\tilde{\tau}{}_{s}}))
\tilde{\epsilon}=\epsilon_{\theta}(\tilde{x}{}_{\tilde{\tau}{}_{s}}|\Delta{h}_%
{\tilde{\tau}{}_{s}})
\epsilon=\epsilon_{\theta}(\tilde{x}{}_{\tilde{\tau}{}_{s}})
\sigma_{\tilde{\tau}{}_{s}}=0
s\geq S_{noise}
\tilde{\epsilon}=\epsilon=\epsilon_{\theta}(\tilde{x}{}_{\tilde{\tau}{}_{s}})
\sigma_{\tilde{\tau}{}_{s}}=0
\tilde{\epsilon}=\epsilon=\epsilon_{\theta}(\tilde{x}{}_{\tilde{\tau}{}_{s}})
\sigma_{\tilde{\tau}{}_{s}}=\sqrt{\left(1-\alpha_{\tilde{\tau}{}_{s}-1}\right)%
/\left(1-\alpha_{\tilde{\tau}{}_{s}}\right)}\sqrt{1-\alpha_{\tilde{\tau}{}_{s}%
}/\alpha_{\tilde{\tau}{}_{s}-1}}
z\sim N(0,1)
\tilde{x}{}_{\tilde{\tau}{}_{s-1}}=\sqrt{\alpha_{\tilde{\tau}{}_{s-1}}}\;(%
\frac{\tilde{x}{}_{\tilde{\tau}{}_{s}}-\sqrt{1-\alpha_{\tilde{\tau}{}_{s}}}%
\tilde{\epsilon}}{\sqrt{\alpha_{\tilde{\tau}{}_{s}}}})+\sqrt{1-\alpha_{\tilde{%
\tau}{}_{s-1}}-\sigma^{2}_{\tilde{\tau}{}_{s}}}\epsilon+\sigma_{\tilde{\tau}{}%
_{s}}z
\tilde{x}{}_{0}
\epsilon_{\theta}
\{x_{0}^{(i)}\}_{i=1}^{N}
f_{t}
y_{src}
y_{tar}
S_{for}
K
t_{\mathrm{edit}}
\S
t_{\mathrm{boost}}
\S
\{\tau_{s}\}^{S_{for}}_{s=1}
\tau_{1}=0
\tau_{S_{for}}=T
i=1,2,...,N
s=1,2,...,S_{for}-1
\epsilon\xleftarrow{}\epsilon_{\theta}(x_{\tau_{s}}^{(i)},\tau_{s})
x_{\tau_{s+1}}^{(i)}=\sqrt{\alpha_{\tau_{s}}}x_{\tau_{s}}^{(i)}+\sqrt{1-\alpha%
_{\tau_{s}}}\epsilon
x_{\tau_{S_{for}}}^{(i)}
\tau_{S_{edit}}=t_{edit}
{\bm{f}}_{t}
=1,2,...,K
i=1,2,...,N
\tilde{x}{}_{\tau_{S_{for}}}^{(i)}=x_{\tau_{S_{for}}}^{(i)}
s=S_{for},S_{for}-1,...,S_{edit}
h_{\tau{}_{s}}
\epsilon_{\theta}(\tilde{x}{}_{\tau{}_{s}}^{(i)})
\Delta{h}_{\tau_{s}}=f_{\tau_{s}}(h_{\tau_{s}})
P=\frac{\tilde{x}{}_{\tau_{s}}^{(i)}-\sqrt{1-\alpha_{\tau_{s}}}\epsilon_{%
\theta}(\tilde{x}{}_{\tau_{s}}^{(i)}|\Delta{h}_{\tau_{s}})}{\sqrt{\alpha_{\tau%
_{s}}}}
P_{src}=\frac{x_{\tau_{s}}^{(i)}-\sqrt{1-\alpha_{\tau_{s}}}\epsilon_{\theta}(x%
_{\tau_{s}}^{(i)})}{\sqrt{\alpha_{\tau_{s}}}}
\tilde{x}{}_{\tau_{s-1}}^{(i)}=\sqrt{\alpha_{\tau_{s-1}}}P+\sqrt{1-\alpha_{%
\tau_{s-1}}}\epsilon_{\theta}(\tilde{x}{}_{\tau_{s}}^{(i)})
x_{\tau_{s-1}}^{(i)}=\sqrt{\alpha_{\tau_{s-1}}}P_{src}+\sqrt{1-\alpha_{\tau_{s%
-1}}}\epsilon_{\theta}(x_{\tau_{s}}^{(i)})
L_{total}\xleftarrow{}\lambda_{CLIP}L_{direction}(P,y_{tar},P_{src},y_{src})+{%
\lambda_{recon}|P-P_{src}|}
L_{total}
f_{t}
f_{t}
f_{t}
\lambda_{\mathrm{CLIP}}
\lambda_{\mathrm{recon}}=\text{CLIP similarity}*3
\lambda_{\mathrm{CLIP}}
\lambda_{\mathrm{recon}}
\lambda_{\mathrm{CLIP}}
\lambda_{\mathrm{recon}}=\text{CLIP similarity}*3
\lambda_{\mathrm{CLIP}}
\lambda_{\mathrm{recon}}=\text{CLIP similarity}*3
{\bm{x}}_{T}\sim\mathcal{N}(0,\mathbf{I})
{\bm{x}}_{T}=q({\bm{x}}_{0})\cdot\prod_{t=1}^{T}q\left({\bm{x}}_{t}\mid{\bm{x}%
}_{t-1}\right)
{\bm{x}}_{0}\sim p_{data}(x)
{\bm{f}}_{t}
S_{\mathrm{dir}}
S_{\mathrm{dir}}
S_{\mathrm{dir}}
\displaystyle\mathbf{\mathcal{S}_{\text{dir}}}\left({\bm{x}}_{\text{gen}},{y_{%
\text{tar}}};{\bm{x}}_{\text{ref}},{y_{\text{ref}}}\right):=\frac{\langle%
\Delta I,\Delta T\rangle}{\|\Delta I\|\|\Delta T\|},
\displaystyle\mathbf{\mathcal{S}_{\text{dir}}}\left({\bm{x}}_{\text{gen}},{y_{%
\text{tar}}};{\bm{x}}_{\text{ref}},{y_{\text{ref}}}\right):=\frac{\langle%
\Delta I,\Delta T\rangle}{\|\Delta I\|\|\Delta T\|},
S_{\mathrm{dir}}
S_{\mathrm{dir}}
S_{\mathrm{dir}}
S_{\mathrm{dir}}
S_{\mathrm{dir}}
S_{\mathrm{dir}}
S_{\mathrm{dir}}
S_{\mathrm{dir}}
\Delta h_{t}
f_{t}
\Delta h_{t}
f_{t}
\Delta h_{t}
{\bm{f}}_{t}
\Delta h_{t}
{\bm{f}}_{t}
\Delta h_{t}
{\bm{f}}_{t}
t_{\mathrm{edit}}
\Delta h_{t}
f_{t}
\Delta h_{t}
\Delta h^{global}
f_{t}\approx\Delta h^{global}<\Delta h_{t}
\Delta h_{t}
t
\Delta h_{t}
t
f_{t}
\Delta h^{global}
f_{t}\approx\Delta h_{t}>\Delta h^{global}
f_{t}
\Delta h_{t}
\Delta h^{global}
f_{t}>\Delta h_{t}>\Delta h^{global}
\Delta h_{t}
f_{t}
\Delta h^{global}
\Delta h_{t}
f_{t}
\Delta{h}
\Delta{h}
