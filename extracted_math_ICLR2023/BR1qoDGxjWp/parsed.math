\mathbf{z}_{y}
\mathbf{z}_{d}
\bm{z}_{y}
\bm{z}_{d}
\mathbf{z}_{y}
D_{S}=\left\{\bm{x}_{i}^{S},y_{i}^{S}\right\}_{i=1}^{n_{S}}
D_{T}=\left\{\bm{x}_{j}^{T}\right\}_{j=1}^{n_{T}}
(1)
(2)
\bm{z}_{d}
\bm{z}_{y}
\bm{z}_{d}
\bm{z}_{y}
\bm{x}
\bm{z}_{d}
\bm{z}_{y}
\mathbf{z}_{d}\in\mathbb{R}^{K_{d}}
\mathbf{z}_{y}\in\mathbb{R}^{K_{y}}
\bm{z}=\{\mathbf{z}_{y},\mathbf{z}_{d}\}
\mathbf{z}_{y}\mathchoice{\mathrel{\hbox to0.0pt{ $\displaystyle\perp$ \hss}%
\mkern 2.0mu{\displaystyle\perp}}}{\mathrel{\hbox to0.0pt{ $\textstyle\perp$ %
\hss}\mkern 2.0mu{\textstyle\perp}}}{\mathrel{\hbox to0.0pt{ $\scriptstyle%
\perp$ \hss}\mkern 2.0mu{\scriptstyle\perp}}}{\mathrel{\hbox to0.0pt{ $%
\scriptscriptstyle\perp$ \hss}\mkern 2.0mu{\scriptscriptstyle\perp}}}\mathbf{z%
}_{d}
\textstyle\perp
G(.)
\bm{z}
G(\bm{x})
\bm{z}_{y}
\bm{z}_{d}
\bm{z}_{y}
\bm{z}_{d}
\bm{z}_{d}
\bm{z}_{y}
\bm{z}_{y}
\bm{z}_{d}
H_{y}
H_{d}
C_{y}
C_{d}
\bm{z}_{y}
\bm{z}_{d}
H_{y}
H_{d}
C_{y}
C_{d}
q_{\phi}(\bm{z}|\bm{x})
\bm{\phi}
p(\bm{z}|\bm{x})
\mathcal{L}_{\mathrm{ELBO}}(\bm{\phi},\theta_{r})=\\
-D_{KL}\left(q_{\bm{\phi}}(\bm{z}|\bm{x})||P(\bm{z})\right)+\mathbb{E}_{q_{\bm%
{\phi}}(\bm{z}|\bm{x})}\left[\log P_{\theta_{r}}(\bm{x}|\bm{z})\right],
P_{\theta_{r}}(\bm{x}|\bm{z})
\theta_{r}
P(\bm{z})
\bm{z}
\bm{z_{y}}
\bm{z_{d}}
\begin{aligned} \mathcal{L}_{\mathrm{ELBO}}(\phi_{y},\phi_{d},\theta_{r})=-D_{%
KL}(q_{\phi_{y}}(\bm{z}_{y}|G(\bm{x}))\|P(\bm{z}_{y}))\\
-D_{KL}(q_{\phi_{d}}(\bm{z}_{d}|G(\bm{x}))\|P(\bm{z}_{d}))\\
+\mathbb{E}_{q_{\phi_{y,d}}(\bm{z}_{y},\bm{z}_{d}|G(\bm{x}))}[\log P_{\theta_{%
r}}(G(\bm{x})|\bm{z}_{y},\bm{z}_{d})].\end{aligned}
P(\bm{z}_{y}),P(\bm{z}_{d})\sim\mathcal{N}(\bm{0},{\mathbf{I}})
\phi_{y}
\phi_{d}
H_{y}(G(\mathbf{x});\phi_{y})
H_{d}(G(\mathbf{x});\phi_{d})
q
\bm{z}_{y}
\bm{z}_{d}
\bm{z}_{y}
C_{y}
C_{d}
C_{d}
\phi_{y}
H_{y}
L_{d}
C_{d}
L_{y}
C_{y}
\theta_{y,d}
C_{d}
L_{d}
\begin{aligned} \mathcal{L}_{sem}&(\phi_{y},\theta_{y,y},\theta_{y,d})=\\
&\frac{\delta}{n_{S}}\sum_{x_{i}^{s}\in D_{S}}L_{y}\left(C_{y}\left(H_{y}\left%
(G(\bm{x});\phi_{y}\right);\theta_{y,y}\right),y_{i}\right)\\
-&\frac{\lambda}{n}\sum_{x_{i}\in\left(D_{S},D_{T}\right)}L_{d}\left(C_{d}%
\left(H_{y}\left(G(\bm{x});\phi_{y}\right);\theta_{y,d}\right),d_{i}\right),%
\end{aligned}
n=n_{S}+n_{T}
\lambda
\delta
L_{y}
\delta
\delta
\bm{z}_{d}
\bm{z}_{d}
\bm{z}_{y}
L_{e}
C_{y}
\phi_{d}
H_{d}
L_{e}
C_{y}
L_{d}
C_{d}
\theta_{d,y}
C_{y}
L_{e}
\begin{aligned} \mathcal{L}_{dom}&(\phi_{d},\theta_{d,d},\theta_{d,y})=\\
&\frac{1}{n}\cdot\sum_{x_{i}\in\left(D_{S},D_{T}\right)}L_{d}\left(C_{d}\left(%
H_{d}\left(G(\bm{x});\phi_{d}\right);\theta_{d,d}\right),d_{i}\right)\\
-&\frac{\omega}{n}\cdot\sum_{x_{i}\in\left(D_{S},D_{T}\right)}L_{E}\left(C_{y}%
\left(H_{d}\left(G(\bm{x});\phi_{d}\right);\theta_{d,y}\right)\right),\end{aligned}
\omega
\begin{aligned} \mathcal{L}(\phi_{y},\theta_{y,d},\theta_{y,y},\phi_{d},&%
\theta_{d,d},\theta_{d,y},\theta_{r})=\\
&\mathcal{L}_{\mathrm{ELOB}}+\beta\mathcal{L}_{sem}+\gamma\mathcal{L}_{dom},%
\end{aligned}
\beta
\gamma
\beta
\gamma
(\hat{\phi_{y}},\hat{\theta_{y,y}},\hat{\phi_{d}},\hat{\theta_{d,y}},\hat{%
\theta_{r}})=\\
\mathop{\arg\min}_{\phi_{y},\theta_{y,y},\phi_{d},\theta_{d,y},\theta_{r}}%
\mathcal{L}(\phi_{y},\theta_{y,d},\theta_{y,y},\phi_{d},\theta_{d,d},\theta_{d%
,y},\theta_{r})\\
(\hat{\theta_{y,d}},\hat{\theta_{d,d}})=\mathop{\arg\max}_{\theta_{y,d},\theta%
_{d,d}}\mathcal{L}(\phi_{y},\theta_{y,d},\theta_{y,y},\phi_{d},\theta_{d,d},%
\theta_{d,y},\theta_{r}).
y=C_{y}\left(H_{y}\left(G(\bm{x});\hat{\phi_{y}}\right);\hat{\theta_{y,y}}%
\right).
\displaystyle R:\mathcal{X}\rightarrow\mathcal{Z}
R\triangleq H\circ G
D_{S}
\displaystyle\mathcal{X}
\tilde{D}_{S}
\mathcal{Z}
\displaystyle\operatorname{Pr}_{\tilde{\mathcal{D}}_{S}}[B]\stackrel{{%
\scriptstyle\operatorname{def}}}{{=}}\operatorname{Pr}_{\mathcal{D}_{S}}\left[%
\mathcal{R}^{-1}(B)\right]
\displaystyle B
D_{T}
\displaystyle\tilde{D}_{T}
\displaystyle h
\displaystyle\epsilon_{S}(h)=\mathrm{E}_{\mathbf{z}\sim\tilde{D}_{S}}[\mathrm{%
E}_{y\sim\tilde{f}(\mathbf{z})}[y\neq h(\mathbf{z})]]
\displaystyle\epsilon_{S}(h)=
\displaystyle\mathrm{E}_{\mathbf{z}\sim\tilde{D}_{S}}[\mathrm{E}_{y\sim\tilde{%
f}(\mathbf{z})}[y\neq h(\mathbf{z})]]
\displaystyle=\mathrm{E}_{\mathbf{z}\sim\tilde{D}_{S}}[C(\mathbf{z})-h(\mathbf%
{z})],
\displaystyle=
\displaystyle\mathrm{E}_{\mathbf{z}\sim\tilde{D}_{S}}[C(\mathbf{z})-h(\mathbf{%
z})],
\displaystyle C:\mathcal{Z}\rightarrow[0,1]
\displaystyle\tilde{D}_{S}
\mathbf{z}_{y}\mathchoice{\mathrel{\hbox to0.0pt{ $\displaystyle\perp$ \hss}%
\mkern 2.0mu{\displaystyle\perp}}}{\mathrel{\hbox to0.0pt{ $\textstyle\perp$ %
\hss}\mkern 2.0mu{\textstyle\perp}}}{\mathrel{\hbox to0.0pt{ $\scriptstyle%
\perp$ \hss}\mkern 2.0mu{\scriptstyle\perp}}}{\mathrel{\hbox to0.0pt{ $%
\scriptscriptstyle\perp$ \hss}\mkern 2.0mu{\scriptscriptstyle\perp}}}\mathbf{z%
}_{d}
\textstyle\perp
\mathbf{z}=\{\mathbf{z}_{y},\mathbf{z}_{d}\}
\displaystyle h
\displaystyle\epsilon^{y}_{S}(h)=\epsilon_{S}(h)-\alpha_{S},
\displaystyle\epsilon^{y}_{S}(h)=\epsilon_{S}(h)-\alpha_{S},
\displaystyle\epsilon^{y}_{T}(h)=\epsilon_{T}(h)-\alpha_{T},
\displaystyle\epsilon^{y}_{T}(h)=\epsilon_{T}(h)-\alpha_{T},
\displaystyle\mathrm{\alpha_{S}}\coloneqq\mathrm{E}_{\mathbf{z}_{d}\sim\tilde{%
\mathcal{D}}_{S}}[C(\mathbf{z}_{d})-h(\mathbf{z}_{d})]
\mathrm{\epsilon^{y}_{S}(h)\coloneqq E}_{\mathbf{z}_{y}\sim\tilde{\mathcal{D}}%
_{S}}[C(\mathbf{z}_{y})-h(\mathbf{z}_{y})]
h
\mathrm{\epsilon^{y}_{T}(h)}
\mathbf{z}_{y}\mathchoice{\mathrel{\hbox to0.0pt{ $\displaystyle\perp$ \hss}%
\mkern 2.0mu{\displaystyle\perp}}}{\mathrel{\hbox to0.0pt{ $\textstyle\perp$ %
\hss}\mkern 2.0mu{\textstyle\perp}}}{\mathrel{\hbox to0.0pt{ $\scriptstyle%
\perp$ \hss}\mkern 2.0mu{\scriptstyle\perp}}}{\mathrel{\hbox to0.0pt{ $%
\scriptscriptstyle\perp$ \hss}\mkern 2.0mu{\scriptscriptstyle\perp}}}\mathbf{z%
}_{d}
\textstyle\perp
\displaystyle\epsilon_{S}(h)=\mathrm{E}_{(\mathbf{z}_{y},\mathbf{z}_{d})\sim%
\tilde{\mathcal{D}}_{S}}[C(\mathbf{z})-h(\mathbf{z})]
\displaystyle\epsilon_{S}(h)=
\displaystyle\mathrm{E}_{(\mathbf{z}_{y},\mathbf{z}_{d})\sim\tilde{\mathcal{D}%
}_{S}}[C(\mathbf{z})-h(\mathbf{z})]
\displaystyle=\underbrace{\mathrm{E}_{z_{y}\sim\tilde{\mathcal{D}}_{S_{y}}}[C(%
\mathbf{z}_{y})-h(\mathbf{z}_{y})]+}_{\mathrm{\epsilon^{y}_{S}(h)}}
\displaystyle=
\displaystyle\underbrace{\mathrm{E}_{z_{y}\sim\tilde{\mathcal{D}}_{S_{y}}}[C(%
\mathbf{z}_{y})-h(\mathbf{z}_{y})]+}_{\mathrm{\epsilon^{y}_{S}(h)}}
\displaystyle\underbrace{\mathrm{E}_{z_{d}\sim\tilde{\mathcal{D}}_{S_{d}}}[C(%
\mathbf{z}_{d})-h(\mathbf{z}_{d})]}_{\mathrm{\alpha_{S}}}
\displaystyle\underbrace{\mathrm{E}_{z_{d}\sim\tilde{\mathcal{D}}_{S_{d}}}[C(%
\mathbf{z}_{d})-h(\mathbf{z}_{d})]}_{\mathrm{\alpha_{S}}}
\displaystyle=\mathrm{\epsilon^{y}_{S}(h)}+\mathrm{\alpha_{S}}.
\displaystyle=
\displaystyle\mathrm{\epsilon^{y}_{S}(h)}+\mathrm{\alpha_{S}}.
\displaystyle\mathbf{z}_{y}
\displaystyle\mathbf{z}_{d}
\displaystyle\tilde{\mathcal{D}}_{S}
\epsilon^{y}_{T}(h)=\epsilon_{T}(h)-\alpha_{T}
\tilde{\mathcal{D}}_{T}
R(x)
\mathcal{X}
\mathcal{Z}
\mathcal{H}
h^{*}=\arg\min_{h\in\mathcal{H}}(\epsilon_{T}(h),\ \ \epsilon_{S}(h))
\lambda_{S}
\lambda_{T}
h^{*}
\mathcal{D}_{S}
\mathcal{D}_{T}
\displaystyle\lambda_{T}\coloneqq\epsilon_{T}\left(h^{*}\right)
\displaystyle\lambda_{S}\coloneqq\epsilon_{S}\left(h^{*}\right)
\epsilon^{y}_{T}(h)\leq\eta+\epsilon^{y}_{T}(S)+d_{\mathcal{H}}\left(\tilde{%
\mathcal{D}}_{S},\tilde{\mathcal{D}}_{T}\right),
\eta\coloneqq\epsilon^{y}_{T}(h^{*})+\alpha^{*}_{T}+\epsilon^{y}_{S}\left(h^{*%
}\right)+\alpha^{*}_{S}+\alpha_{S}-\alpha_{T}
\epsilon_{T}(h)\leq\lambda_{T}+\lambda_{S}+\epsilon_{S}(h)+d_{\mathcal{H}}%
\left(\tilde{\mathcal{D}}_{S},\tilde{\mathcal{D}}_{T}\right),
\displaystyle d_{\mathcal{H}}\left(\tilde{\mathcal{D}}_{S},\tilde{\mathcal{D}}%
_{T}\right)=2\sup_{h\in\mathcal{H}}\left|\operatorname{Pr}_{D_{S}}[\mathcal{Z}%
_{h}\vartriangle\mathcal{Z}_{h^{*}}]-\operatorname{Pr}_{D_{T}}[\mathcal{Z}_{h}%
\vartriangle\mathcal{Z}_{h^{*}}]\right|.
\displaystyle\epsilon^{y}_{T}(h)\leq\lambda_{T}+\lambda_{S}+\epsilon_{S}(h)+d_%
{\mathcal{H}}\left(\tilde{\mathcal{D}}_{S},\tilde{\mathcal{D}}_{T}\right)-%
\alpha_{T}
\displaystyle\epsilon^{y}_{T}(h)
\displaystyle\leq\lambda_{T}+\lambda_{S}+\epsilon_{S}(h)+d_{\mathcal{H}}\left(%
\tilde{\mathcal{D}}_{S},\tilde{\mathcal{D}}_{T}\right)-\alpha_{T}
\displaystyle\leq\lambda_{T}+\lambda_{S}+\epsilon_{S}(h)+d_{\mathcal{H}}\left(%
\tilde{\mathcal{D}}_{S},\tilde{\mathcal{D}}_{T}\right).
\displaystyle\leq\lambda_{T}+\lambda_{S}+\epsilon_{S}(h)+d_{\mathcal{H}}\left(%
\tilde{\mathcal{D}}_{S},\tilde{\mathcal{D}}_{T}\right).
\lambda_{T}=\epsilon_{T}\left(h^{*}\right)=\epsilon^{y}_{T}\left(h^{*}\right)+%
\alpha^{*}_{T}
\displaystyle\epsilon^{y}_{T}(h)\leq\lambda_{T}+\lambda_{S}+\epsilon_{S}(h)+d_%
{\mathcal{H}}\left(\tilde{\mathcal{D}}_{S},\tilde{\mathcal{D}}_{T}\right)-%
\alpha_{T}
\displaystyle\epsilon^{y}_{T}(h)
\displaystyle\leq\lambda_{T}+\lambda_{S}+\epsilon_{S}(h)+d_{\mathcal{H}}\left(%
\tilde{\mathcal{D}}_{S},\tilde{\mathcal{D}}_{T}\right)-\alpha_{T}
\displaystyle\leq\epsilon^{y}_{T}(h^{*})+\alpha^{*}_{T}+\epsilon^{y}_{S}\left(%
h^{*}\right)+\alpha^{*}_{S}+\epsilon^{y}_{S}(h)
\displaystyle\leq\epsilon^{y}_{T}(h^{*})+\alpha^{*}_{T}+\epsilon^{y}_{S}\left(%
h^{*}\right)+\alpha^{*}_{S}+\epsilon^{y}_{S}(h)
\displaystyle+\alpha_{S}+d_{\mathcal{H}}\left(\tilde{\mathcal{D}}_{S},\tilde{%
\mathcal{D}}_{T}\right)-\alpha_{T}
\displaystyle+\alpha_{S}+d_{\mathcal{H}}\left(\tilde{\mathcal{D}}_{S},\tilde{%
\mathcal{D}}_{T}\right)-\alpha_{T}
\displaystyle\leq\eta+\epsilon^{y}_{T}(S)+d_{\mathcal{H}}\left(\tilde{\mathcal%
{D}}_{S},\tilde{\mathcal{D}}_{T}\right),
\displaystyle\leq\eta+\epsilon^{y}_{T}(S)+d_{\mathcal{H}}\left(\tilde{\mathcal%
{D}}_{S},\tilde{\mathcal{D}}_{T}\right),
\eta\coloneqq\epsilon^{y}_{T}(h^{*})+\alpha^{*}_{T}+\epsilon^{y}_{S}\left(h^{*%
}\right)+\alpha^{*}_{S}+\alpha_{S}-\alpha_{T}
A\rightarrow W
D\rightarrow W
W\rightarrow D
A\rightarrow D
D\rightarrow A
W\rightarrow A
\delta=1
\delta=2
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\delta=1
\delta=2
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\rightarrow
\delta
\delta=2
\mathbf{z}_{y}
\mathbf{z}_{d}
