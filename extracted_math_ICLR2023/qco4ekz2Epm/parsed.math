(S,A,R,p,\gamma)
\gamma
\pi
E_{\pi}[\sum_{t=0}^{\infty}\gamma^{t}r_{t+1}]
Q^{\pi}(s,a)=E_{\pi}[\sum_{t=0}^{\infty}\gamma^{t}r_{t+1}|s_{0}=s,a_{0}=a]
k
\pi_{0},\pi_{1},\ldots,\pi_{k}
\pi_{k+1}
\mathbf{S}
\mathbf{A}
\mathbf{R}
\mathcal{S}
\ (expected\_finish\_time\div Qos\ Value
n
n+2
\mathcal{A}=\{j_{0},j_{1},\ldots,j_{n},suspend,no\_op\}
\{a=j_{i},\forall i\leq n\}
i
j_{i}
a=suspend
a=no\_op
Total\ Job\ Value=\sum_{i=1}^{|J_{finished}|}j_{i}.value
n
n+2
t
k
\mathcal{D}\leftarrow\{(s_{i},a_{i},r_{i},s_{i}^{\prime}),\dots\}
f
\pi_{\theta}
Q_{\phi}
t\in\{0,\dots,T\}
B
\{(s_{i},a_{i},r_{i},s_{i}^{\prime})\}_{i=0}^{i=B}
\mathcal{D}
\mathcal{L}_{a}\leftarrow\displaystyle\frac{1}{B}\sum_{i=0}^{i=B}f(Q_{\phi},s_%
{i},a_{i})\text{log}\pi_{\theta}(a_{i}\mid s_{i})
\mathcal{L}_{c}\leftarrow\displaystyle\frac{1}{B}\sum_{i=0}^{i=B}\left(\left(Q%
_{\phi}(s_{i},a_{i})-\mathop{\mathbb{E}}\left[(r_{i}+\gamma Q_{\phi}(s_{i}^{%
\prime},a^{\prime})\right]\right)^{2}\right)
\phi\leftarrow\displaystyle\phi-\alpha\nabla{\phi}\mathcal{L}_{c}
\theta\leftarrow\displaystyle\theta-\alpha\nabla_{\theta}\mathcal{L}_{a}
\pi_{\theta}(s)
Q_{\phi}
\mathbf{T}:\mathcal{S}\times\mathcal{A}\rightarrow\mathcal{S}
\mathbf{R}:\mathcal{S}\times\mathcal{A}\times\mathcal{S}\rightarrow\mathbb{R}
\mathcal{D}\leftarrow\{(s_{i},a_{i},r_{i},s_{i}^{\prime}),\dots\}
\pi_{\theta}
Q_{\phi}
t\in\{0,\dots,T\}
a_{t}\sim\pi_{\theta}(s_{t})
s_{t}^{\prime}\leftarrow\mathbf{T}(s_{t},a_{t}),
r_{t}\leftarrow\mathbf{R}(s_{t},a_{t},s_{t}^{\prime})
\mathcal{D}\leftarrow\mathcal{D}\cup\{(s_{t},a_{t},r_{t},s_{t}^{\prime})\}
B
\{(s_{i},a_{i},r_{i},s_{i}^{\prime})\}_{i=0}^{i=B}\sim\mathcal{D}
\mathcal{L}_{c}\leftarrow\displaystyle\frac{1}{B}\sum_{i=0}^{i=B}\left(\left(Q%
_{\phi}(s_{i},a_{i})-\mathop{\mathbb{E}}\left[(r_{i}+\gamma Q_{\phi}(s_{i}^{%
\prime},a^{\prime})\right]\right)^{2}\right)
\mathcal{L}_{a}\leftarrow\displaystyle\frac{1}{B}\sum_{i=0}^{i=B}\left(\mathop%
{\mathbb{E}}_{a^{\prime}\sim\pi_{\theta}(s_{i})}\left[-Q_{\phi}(s_{i},a^{%
\prime})\right]\right)
\phi\leftarrow\displaystyle\phi-\alpha\nabla{\phi}\mathcal{L}_{c}
\theta\leftarrow\displaystyle\theta-\alpha\nabla_{\theta}\mathcal{L}_{a}
\pi_{\theta}(s)
f
f
f
A^{\pi}(s,a)=Q^{\pi}(s,a)-\mathbb{E}_{a^{\prime}\sim\pi(s)}[Q^{\pi}(s,a^{%
\prime})]
A^{\pi_{\theta}}(s,a)\approx Q_{\phi}(s,a)-\frac{1}{k}\sum_{j=1}^{j=k}Q_{\phi}%
(s,a_{j}\sim\pi_{\theta}(s))
f
f(Q_{\phi},s,a)=\text{exp}(A^{\pi_{\theta}}(s,a))
f(Q_{\phi},s,a)=\mathbbm{1}\{A^{\pi_{\theta}}(s,a)>0\}
\pm 0.015-0.023
\lambda
x+1
x
x+2
x+1
x+2
x
\mathcal{D}
\mathcal{D}
95\%
99\%
98\%
91\%
91\%
87\%
21\%
21\%
17\%
10
99\%
98\%
95\%
5\%
91\%
87\%
21\%
17\%
\times
\times
\times
\times
\times
\times
\mathcal{D}
