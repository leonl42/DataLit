D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
a^{\prime}
a
(l+1)
a
a^{\prime}
T_{a}^{(l+1)}
T_{a^{\prime}}^{(l+1)}
l
N(a^{\prime})
l
N(a)
N(\cdot)
l
N(a^{\prime})
N(a)
a^{\prime}
a
(l+1)
a
a^{\prime}
T_{a}^{(l+1)}
T_{a^{\prime}}^{(l+1)}
l
N(a^{\prime})
l
N(a)
N(\cdot)
l
N(a^{\prime})
N(a)
\displaystyle H^{(l+1)}=\mbox{AGG}_{f}(A,H^{(l)})
\displaystyle H^{(l+1)}=\mbox{AGG}_{f}(A,H^{(l)})
\displaystyle H_{i:}^{(l+1)}=\phi\left(H_{i:}^{(l)},f\left(\left\{H_{j:}^{(l)}%
:j\in\mathcal{N}(i)\right\}\right)\right)
\displaystyle H_{i:}^{(l+1)}=\phi\left(H_{i:}^{(l)},f\left(\left\{H_{j:}^{(l)}%
:j\in\mathcal{N}(i)\right\}\right)\right)
f(\cdot)
\phi
H^{(l)}
i
H_{i:}
i
A_{\mathcal{Q}}
A_{\mathcal{T}}
G_{\mathcal{Q}}
G_{\mathcal{T}}
N(\cdot)
|\cdot|
T_{v}^{(l)}
v
l
v
l
l
l
G_{\mathcal{Q}}(V_{\mathcal{Q}},E_{\mathcal{Q}})
G_{\mathcal{T}}(V_{\mathcal{T}},E_{\mathcal{T}})
(V_{\mathcal{Q}},E_{\mathcal{Q}})
(V_{\mathcal{T}},E_{\mathcal{T}})
{X}_{\mathcal{Q}}\in\mathbb{R}^{\left|V_{\mathcal{Q}}\right|\times D}
{X}_{\mathcal{T}}\in\mathbb{R}^{\left|{V}_{\mathcal{T}}\right|\times D}
D
G_{\mathcal{Q}}
G_{\mathcal{T}}
\xi:V_{\mathcal{Q}}\to V_{\mathcal{T}}
\forall u,v\in V_{\mathcal{Q}},(u,v)\in E_{\mathcal{Q}}\Leftrightarrow(\xi(u),%
\xi(v))\in E_{\mathcal{T}}
S\in\{0,1\}^{|V_{\mathcal{T}}|\times|V_{\mathcal{Q}}|}
S_{ij}=1
(i,j)
\xi(j)=i
S
S
SA_{\mathcal{Q}}S^{T}=A_{\mathcal{T}},\quad\mbox{s.t.}\begin{cases}\sum_{i}{S_%
{ij}}=1,\forall j\\
\sum_{j}{S_{ij}}\leq 1,\forall i\\
S_{ij}\in\{0,1\},\forall i,j.\end{cases}
G_{\mathcal{Q}}\subset G_{\mathcal{T}}
G_{\mathcal{Q}}
G_{\mathcal{T}}
k
k
v
Sub^{(l)}_{v}
l
v
v
\displaystyle T_{v}^{(l)}=\Psi(Sub_{v}^{(l)}),
\displaystyle T_{v}^{(l)}=\Psi(Sub_{v}^{(l)}),
\Psi
k
k
B(X,Y,E)
X
Y
|Y|\leq|X|
E
B(X,Y,E)
\forall~{}W\subseteq Y,|W|\leq|N(W)|
N(W)
W
N(W)=\{b_{j}\in X:\exists a_{i}\in W,(a_{i},b_{j})\in E\}
D^{2}
G_{\mathcal{Q}}
G_{\mathcal{T}}
q
G_{\mathcal{Q}}
t=\xi(q)
G_{\mathcal{T}}
G_{\mathcal{T}}(V_{\mathcal{T}},E_{\mathcal{T}})
G_{\mathcal{Q}}(V_{\mathcal{Q}},E_{\mathcal{Q}})
G_{\mathcal{Q}}\subset G_{\mathcal{T}}
\Psi
\forall\ \mbox{graph pair}\ (G_{\mathcal{S}},G),\mbox{if}\ G_{\mathcal{S}}%
\subset G,\mbox{then}\ \Psi(G_{\mathcal{S}})\subset\Psi(G),
\xi\!:\!V_{\mathcal{Q}}\to V_{\mathcal{T}}
l
\forall l\geq 1,{\textnormal{q}}\in V_{\mathcal{Q}},{\textnormal{t}}=\xi({%
\textnormal{q}})\in V_{\mathcal{T}}\Rightarrow T_{\textnormal{q}}^{(l)}\subset
T%
_{{\textnormal{t}}}^{(l)},
G_{\mathcal{Q}}
G_{\mathcal{T}}
G_{\mathcal{Q}}
G_{\mathcal{T}}
T_{\textnormal{q}}^{(l)}\subset T_{\textnormal{t}}^{(l)}
G_{\mathcal{Q}}
G_{\mathcal{T}}
S^{(l)}\in R^{|V_{\mathcal{T}}|\times|V_{\mathcal{Q}}|}
S^{(l)}_{{\textnormal{t}}{\textnormal{q}}}=\begin{cases}1,\mbox{if}\ T_{%
\textnormal{q}}\subset T_{\textnormal{t}}\\
0,\mbox{otherwise}\end{cases},
S^{(l)}
S
l
T_{\textnormal{q}}^{(l+1)}\subset T_{\textnormal{t}}^{(l+1)}
f\!:\!N({\textnormal{q}})\to N({\textnormal{t}})
\forall{\textnormal{q}}_{i}\in N({\textnormal{q}}),{\textnormal{t}}_{i}=f({%
\textnormal{q}}_{i}),T_{{\textnormal{q}}_{i}}^{(l)}\subset T_{{\textnormal{t}}%
_{i}}^{(l)}
B^{(l)}(N({\textnormal{t}}),N({\textnormal{q}}),E)
\forall{\textnormal{t}}_{j}\in N({\textnormal{t}}),{\textnormal{q}}_{i}\in N({%
\textnormal{q}}),({\textnormal{t}}_{j},{\textnormal{q}}_{i})\in E
T_{{\textnormal{q}}_{i}}^{(l)}\subset T_{{\textnormal{t}}_{j}}^{(l)}
l+1
S^{(l+1)}
S^{(l)}
W
B^{(l)}(N({\textnormal{t}}),N({\textnormal{q}}),E)
W\subseteq N({\textnormal{q}})
W
N(W)\subseteq N({\textnormal{t}})
W
{\textnormal{q}}\in G_{\mathcal{Q}}
{\textnormal{t}}\in G_{\mathcal{T}}
W
W\subseteq N({\textnormal{q}})
\tilde{G}_{\mathcal{Q}}
G_{\mathcal{Q}}
\tilde{A}_{\mathcal{Q}}
W=N^{\prime}({\textnormal{q}})
N^{\prime}({\textnormal{q}})\subset N({\textnormal{q}})
\tilde{G}_{\mathcal{Q}}
W
N(W)
({\textnormal{t}},{\textnormal{q}})
|N(W)|\geq|W|
\Phi^{(l)}(\tilde{A}_{\mathcal{Q}},A_{\mathcal{T}})\in R^{|V_{\mathcal{T}}|%
\times|V_{\mathcal{Q}}|}
({\textnormal{t}},{\textnormal{q}})
({\textnormal{t}},{\textnormal{q}})
\tilde{G}_{\mathcal{Q}}
G_{\mathcal{T}}
S^{(l)}
\Phi^{(l)}(\tilde{A}_{\mathcal{Q}},A_{\mathcal{T}})
\tilde{G}_{\mathcal{Q}}
\Phi
S^{(l)}
\tilde{A}_{\mathcal{Q}}
A_{\mathcal{T}}
\tilde{D}_{\mathcal{Q}}=\mbox{diag}(\sum_{s}((\tilde{A}_{\mathcal{Q}})_{:s}))
l
S^{(l)}
|N(W)|\geq|W|
\Phi^{(l+1)}(\tilde{A}_{\mathcal{Q}},A_{\mathcal{T}})
\Phi^{(l+1)}(\tilde{A}_{\mathcal{Q}},A_{\mathcal{T}})\coloneqq Z_{N(W)}\geq 1
Z_{N(W)}=\mbox{AGG}_{\scriptsize\mbox{sum}}(A_{\mathcal{T}},Z_{W}^{T})
Z_{W}=\mbox{AGG}_{\max}(\tilde{D}_{\mathcal{Q}}^{-1}\cdot\tilde{A}_{\mathcal{Q%
}},(S^{(l)})^{T}).
|N(W)|\geq|W|
({\textnormal{t}},{\textnormal{q}})
\Phi
\tilde{A}_{\mathcal{Q}}^{(k)}
\Phi
\tilde{G}_{\mathcal{Q}}^{(k)}
\displaystyle\scriptsize S^{(l+1)}_{subtree}=\bigodot_{k=0}^{K}{\Phi^{(l+1)}(%
\tilde{A}_{\mathcal{Q}}^{(k)},A_{\mathcal{T}})},
\displaystyle\scriptsize S^{(l+1)}_{subtree}=\bigodot_{k=0}^{K}{\Phi^{(l+1)}(%
\tilde{A}_{\mathcal{Q}}^{(k)},A_{\mathcal{T}})},
\bigodot
\Phi^{(l+1)}(\tilde{A}_{\mathcal{Q}}^{(k)},A_{\mathcal{T}})
\footnotesize\begin{cases}\mbox{AGG}_{\scriptsize\mbox{sum}}(A_{\mathcal{T}},%
\mbox{AGG}_{\max}({D}_{\mathcal{Q}}^{-1}{A}_{\mathcal{Q}},(S^{(l)}))^{T})\geq 1%
&\!k=0\\
\mbox{AGG}_{\scriptsize\mbox{sum}}(A_{\mathcal{T}},\mbox{AGG}_{\max}(\tilde{D}%
_{\mathcal{Q}}^{-1}\tilde{A}_{\mathcal{Q}}^{(k)},(S^{(l)}))^{T})\geq 1&\!k\in[%
1,K)\\
\mbox{AGG}_{\min}(A_{\mathcal{Q}},\mbox{AGG}_{\max}(A_{\mathcal{T}},(S^{(l)})^%
{T})\geq 1&\!k=K\end{cases}
k=0
k=K
k\in[1,K-1]
D^{2}
D^{2}
c=(v_{1},...,v_{l(c)},v_{1})
v(c)
c
c^{\prime}
v(c^{\prime})\subset v(c)
{\mathcal{C}}
\forall c_{\mathcal{Q}}=(v_{1},...,v_{l},v_{1})\in{\mathcal{C}}_{\mathcal{Q}},%
\exists c_{\mathcal{T}}=(\xi(v_{1}),...,\xi(v_{l}),\xi(v_{1}))\in{\mathcal{C}}%
_{\mathcal{T}}
\xi
{\mathcal{C}}_{\mathcal{Q}}
{\mathcal{C}}_{\mathcal{T}}
c_{\mathcal{Q}}
G_{\mathcal{Q}}
c_{\mathcal{T}}
G_{\mathcal{T}}
L
L
{\mathcal{C}}_{\mathcal{T}}=\{c|l(c)\leq L,c\in CC_{\mathcal{T}}\},{\mathcal{C%
}}_{\mathcal{Q}}=\{c|l(c)\leq L,c\in CC_{\mathcal{Q}}\}
CC_{\mathcal{T}}
CC_{\mathcal{Q}}
v_{c}
c
c
\displaystyle\footnotesize\begin{cases}\!\!\!&\!\!\!\!H^{(l+1)}_{\mathcal{T}}=%
GNN^{(l)}_{\mathcal{T}}(A_{\mathcal{T}},\mbox{concat}(H_{\mathcal{T}}^{(l)},%
MLP(S^{(l)})))\\
\!\!\!&\!\!\!\!H^{(l+1)}_{\mathcal{Q}}=GNN^{(l)}_{\mathcal{Q}}(A_{\mathcal{Q}}%
,\mbox{concat}(H_{\mathcal{Q}}^{(l)},MLP(S^{(l)})^{T})))\end{cases}
\displaystyle\footnotesize\begin{cases}\!\!\!&\!\!\!\!H^{(l+1)}_{\mathcal{T}}=%
GNN^{(l)}_{\mathcal{T}}(A_{\mathcal{T}},\mbox{concat}(H_{\mathcal{T}}^{(l)},%
MLP(S^{(l)})))\\
\!\!\!&\!\!\!\!H^{(l+1)}_{\mathcal{Q}}=GNN^{(l)}_{\mathcal{Q}}(A_{\mathcal{Q}}%
,\mbox{concat}(H_{\mathcal{Q}}^{(l)},MLP(S^{(l)})^{T})))\end{cases}
(i,j)
\displaystyle\footnotesize[S^{(l+1)}_{gnn}]_{ij}=MLP(\mbox{concat}([H_{%
\mathcal{T}}^{(l)}]_{i},[H_{\mathcal{Q}}^{(l)}]_{j})).
\displaystyle\footnotesize[S^{(l+1)}_{gnn}]_{ij}=MLP(\mbox{concat}([H_{%
\mathcal{T}}^{(l)}]_{i},[H_{\mathcal{Q}}^{(l)}]_{j})).
S^{(l+1)}=S_{gnn}^{(l+1)}\odot S_{subtree}^{(l+1)}
D^{2}
D^{2}
L
K
O(L*K*|V_{\mathcal{T}}|*|E_{\mathcal{Q}}|+L*|V_{\mathcal{Q}}|*|E_{\mathcal{T}}|)
O(L*|E_{\mathcal{T}}|+L*|E_{\mathcal{Q}}|+|V_{\mathcal{T}}|*|V_{\mathcal{Q}}|)
|V_{\mathcal{Q}}|
|E_{\mathcal{Q}}|
O(|V_{\mathcal{T}}|+|E_{\mathcal{T}}|)
{}_{\pm\text{2.72}}
{}_{\pm\text{0.97}}
{}_{\pm\text{0.60}}
{}_{\pm\text{1.08}}
{}_{\pm\text{0.68}}
{}_{\pm\text{19.58}}
{}_{\pm\text{0.22}}
{}_{\pm\text{0.17}}
{}_{\pm\text{8.98}}
{}_{\pm\text{1.73}}
{}_{\pm\text{0.22}}
{}_{\pm\text{1.08}}
{}_{\pm\text{0.96}}
{}_{\pm\text{6.51}}
{}_{\pm\text{0.00}}
{}_{\pm\text{0.39}}
{}_{\pm\text{0.00}}
{}_{\pm\text{10.02}}
{}_{\pm\text{2.54}}
{}_{\pm\text{7.78}}
{}_{\pm\text{8.51}}
{}_{\pm\text{3.69}}
{}_{\pm\text{3.89}}
{}_{\pm\text{8.61}}
{}_{\pm\text{2.41}}
{}_{\pm\text{6.16}}
{}_{\pm\text{16.44}}
{}_{\pm\text{6.92}}
{}_{\pm\text{15.18}}
{}_{\pm\text{18.20}}
{}_{\pm\text{30.29}}
{}_{\pm\text{0.00}}
{}_{\pm\text{0.31}}
{}_{\pm\text{2.59}}
{}_{\pm\text{1.79}}
{}_{\pm\text{6.53}}
{}_{\pm\text{2.81}}
{}_{\pm\text{0.94}}
{}_{\pm\text{9.71}}
{}_{\pm\text{2.74}}
{}_{\pm\text{8.52}}
{}_{\pm\text{6.92}}
{}_{\pm\text{14.15}}
{}_{\pm\text{3.08}}
{}_{\pm\text{14.60}}
{}_{\pm\text{1.04}}
D^{2}
{}_{\pm\text{0.22}}
{}_{\pm\text{0.00}}
{}_{\pm\text{0.00}}
{}_{\pm\text{0.22}}
{}_{\pm\text{0.27}}
{}_{\pm\text{1.03}}
{}_{\pm\text{0.00}}
{}_{\pm\text{0.00}}
{}_{\pm\text{3.40}}
{}_{\pm\text{2.72}}
{}_{\pm\text{3.36}}
{}_{\pm\text{6.18}}
{}_{\pm\text{2.12}}
{}_{\pm\text{6.06}}
{}_{\pm\text{2.45}}
{}_{\pm\text{2.05}}
{}_{\pm\text{6.61}}
{}_{\pm\text{2.57}}
{}_{\pm\text{8.98}}
{}_{\pm\text{4.76}}
{}_{\pm\text{2.88}}
{}_{\pm\text{3.64}}
{}_{\pm\text{17.78}}
{}_{\pm\text{10.11}}
{}_{\pm\text{5.70}}
{}_{\pm\text{0.00}}
D^{2}
{}_{\pm\text{1.44}}
{}_{\pm\text{0.22}}
{}_{\pm\text{2.97}}
{}_{\pm\text{0.84}}
{}_{\pm\text{2.16}}
{}_{\pm\text{1.41}}
{}_{\pm\text{1.79}}
{}_{\pm\text{0.45}}
{}_{\pm\text{7.44}}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
4:1
500
50\%
70.5\%
D^{2}
D^{2}
100\%
99.5\%
93.3\%
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
2.5\%-33.2\%
D^{2}
D^{2}
D^{2}
L
D^{2}
D^{2}
K
K
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
G_{\mathcal{Q}}(V_{\mathcal{Q}},E_{\mathcal{Q}})
X_{\mathcal{Q}}
G_{\mathcal{T}}(V_{\mathcal{T}},E_{\mathcal{T}})
X_{\mathcal{T}}
L
K
G_{\mathcal{Q}}
G_{\mathcal{T}}
G_{\mathcal{Q}}(V_{\mathcal{Q}},E_{\mathcal{Q}})\leftarrow
ChordlessCycleAugment%
(G_{\mathcal{Q}})
G_{\mathcal{T}}(V_{\mathcal{T}},E_{\mathcal{T}})\leftarrow
ChordlessCycleAugment%
(G_{\mathcal{T}})
H_{\mathcal{Q}}^{(0)}=X_{\mathcal{Q}}\in\mathbb{R}^{|V_{\mathcal{Q}}|\times D}
H_{\mathcal{T}}^{(0)}=X_{\mathcal{T}}\in\mathbb{R}^{|V_{\mathcal{T}}|\times D}
S^{(0)}=InitialAssignMatrix(X_{\mathcal{T}},X_{\mathcal{Q}})\in\mathbb{R}^{|V_%
{\mathcal{T}}|\times|V_{\mathcal{Q}}|}
l=0,1...,L-1
k=0,1,...,K
\tilde{A}_{\mathcal{Q}}^{(k)}=DropEdge(A_{\mathcal{Q}})\in\mathbb{R}^{|V_{%
\mathcal{Q}}|\times|V_{\mathcal{Q}}|}
\Phi^{(l+1)}(\tilde{A}_{\mathcal{Q}}^{(k)},A_{\mathcal{T}})
S^{(l+1)}_{subtree}=\bigodot_{k=0}^{K}{\Phi^{(l+1)}(\tilde{A}_{\mathcal{Q}}^{(%
k)},A_{\mathcal{T}})}\in\mathbb{R}^{|V_{\mathcal{T}}|\times|V_{\mathcal{Q}}|}
H^{(l+1)}_{\mathcal{T}}=GNN^{(l)}_{\mathcal{T}}(A_{\mathcal{T}},concat[H_{%
\mathcal{T}}^{(l)},MLP(S^{(l)})])\in\mathbb{R}^{|V_{\mathcal{T}}|\times d}
H^{(l+1)}_{\mathcal{Q}}=GNN^{(l)}_{\mathcal{Q}}(A_{\mathcal{Q}},concat[H_{%
\mathcal{Q}}^{(l)},MLP((S^{(l)})^{T})])\in\mathbb{R}^{|V_{\mathcal{Q}}|\times d}
S^{(l+1)}_{gnn}\in\mathbb{R}^{|V_{\mathcal{T}}|\times|V_{\mathcal{Q}}|}
S^{(l+1)}=S_{gnn}^{(l+1)}\odot S_{subtree}^{(l+1)}
result=CheckAssign(S^{(L)})
G_{\mathcal{T}}(V_{\mathcal{T}},E_{\mathcal{T}})
G_{\mathcal{Q}}(V_{\mathcal{Q}},E_{\mathcal{Q}})
G_{\mathcal{Q}}\subset G_{\mathcal{T}}
\Psi
\forall\ \mbox{graph pair}\ (G_{\mathcal{S}},G),\mbox{if}\ G_{\mathcal{S}}%
\subset G,\mbox{then}\ \Psi(G_{\mathcal{S}})\subset\Psi(G),
\xi\!:\!V_{\mathcal{Q}}\to V_{\mathcal{T}}
l
\forall l\geq 1,{\textnormal{q}}\in V_{\mathcal{Q}},{\textnormal{t}}=\xi({%
\textnormal{q}})\in V_{\mathcal{T}}\Rightarrow T_{\textnormal{q}}^{(l)}\subset
T%
_{{\textnormal{t}}}^{(l)},
G_{\mathcal{Q}}
G_{\mathcal{T}}
\xi
V_{\mathcal{Q}}\to V_{\mathcal{T}}
\forall{\textnormal{q}}_{i},{\textnormal{q}}_{j}\in V_{\mathcal{Q}},({%
\textnormal{q}}_{i},{\textnormal{q}}_{j})\in E_{\mathcal{Q}}\Rightarrow(\xi({%
\textnormal{q}}_{i}),\xi({\textnormal{q}}_{j}))\in E_{\mathcal{T}}
S(V_{S},E_{S})\in G_{\mathcal{Q}}
G_{\mathcal{T}}
G_{S}(V_{G},E_{G})
V_{G}=\xi(V_{S})
S\subset G_{S}
V_{\mathcal{Q}}
{\textnormal{q}}\in V_{\mathcal{Q}}
S_{\textnormal{q}}^{(l)}
G_{\mathcal{Q}}
G_{S_{\textnormal{q}}^{(l)}}
G_{\mathcal{T}}
S_{\textnormal{q}}^{(l)}\subset G_{S_{\textnormal{q}}^{(l)}}
S_{\textnormal{q}}^{(l)}
G_{S_{\textnormal{q}}^{(l)}}
l
{\textnormal{t}}=\xi({\textnormal{q}})
G_{S_{\textnormal{q}}^{(l)}}
S_{{\textnormal{t}}}^{(l)}
G_{S_{\textnormal{q}}^{(l)}}\subset S_{{\textnormal{t}}}^{(l)}
S_{\textnormal{q}}^{(l)}\subset G_{S_{\textnormal{q}}^{(l)}}\subset S_{{%
\textnormal{t}}}^{(l)}
T_{\textnormal{q}}^{(l)}\subset T_{{\textnormal{t}}}^{(l)}
T_{\textnormal{q}}^{(l+1)}\subset T_{\textnormal{t}}^{(l+1)}
f\!:\!N({\textnormal{q}})\to N({\textnormal{t}})
\forall{\textnormal{q}}_{i}\in N({\textnormal{q}}),{\textnormal{t}}_{i}=f({%
\textnormal{q}}_{i}),T_{{\textnormal{q}}_{i}}^{(l)}\subset T_{{\textnormal{t}}%
_{i}}^{(l)}
B^{(l)}(N({\textnormal{t}}),N({\textnormal{q}}),E)
\forall{\textnormal{t}}_{j}\in N({\textnormal{t}}),{\textnormal{q}}_{i}\in N({%
\textnormal{q}}),({\textnormal{t}}_{j},{\textnormal{q}}_{i})\in E
T_{{\textnormal{q}}_{i}}^{(l)}\subset T_{{\textnormal{t}}_{j}}^{(l)}
T_{\textnormal{q}}^{(l+1)}\subset T_{\textnormal{t}}^{(l+1)}
l
l\geq 1
f\!:\!N({\textnormal{q}})\to N({\textnormal{t}}),\mbox{s.t.}\forall{%
\textnormal{q}}_{i}\in N({\textnormal{q}}),{\textnormal{t}}_{i}=f({\textnormal%
{q}}_{i}),T_{{\textnormal{q}}_{i}}^{(l)}\subset T_{{\textnormal{t}}_{i}}^{(l)}
f_{\textnormal{q}}
\forall
u,v\in T_{\textnormal{q}}^{(l+1)},(u,v)
T_{\textnormal{q}}^{(l+1)}\Rightarrow((f_{\textnormal{q}}(u),f_{\textnormal{q}%
}(v))
T_{\textnormal{t}}^{(l+1)}
f_{{\textnormal{q}}_{i}}
f_{\textnormal{q}}
\forall{\textnormal{q}}_{i}\in N({\textnormal{q}}),T_{{\textnormal{q}}_{i}}^{(%
l)}\subset T_{\textnormal{q}}^{(l+1)}
l
{\textnormal{q}}_{i}
l+1
f_{\textnormal{q}}
T_{{\textnormal{q}}_{i}}^{(l)}
T_{f({\textnormal{q}}_{i})}^{(l)}=T_{{\textnormal{t}}_{i}}^{(l)}
T_{{\textnormal{t}}}^{(l+1)}
f_{\textnormal{q}}(v)=\begin{cases}f_{{\textnormal{q}}_{i}}(v),&v\in T_{{%
\textnormal{q}}_{i}}^{(l)}\\
{\textnormal{q}},&v={\textnormal{q}}\end{cases}
f_{\textnormal{q}}(v)
T_{{\textnormal{q}}_{i}}^{(l)}
S^{(l)}\in R^{|V_{\mathcal{T}}|\times|V_{\mathcal{Q}}|}
S_{{\textnormal{t}}{\textnormal{q}}}^{(l)}=\begin{cases}1,&T_{\textnormal{q}}^%
{(l)}\subset T_{\textnormal{t}}^{(l)}\\
0,&\text{ else }\end{cases}
X=N({\textnormal{t}})
Y=N({\textnormal{q}})
B_{{\textnormal{t}},{\textnormal{q}}}^{(l)}(X,Y,E)
E=\{({\textnormal{t}}_{i},{\textnormal{q}}_{j}):T_{{\textnormal{q}}_{i}}^{(l)}%
\subset T_{{\textnormal{t}}_{j}}^{(l)}\}
{\textnormal{t}}_{i}
{\textnormal{q}}_{j}
i
j
f
f
{\textnormal{q}}_{i}
N({\textnormal{q}})
{\textnormal{t}}_{i}=f({\textnormal{q}}_{i})\in N({\textnormal{t}})
T_{{\textnormal{q}}_{i}}^{(l)}\subset T_{{\textnormal{t}}_{i}}^{(l)}
T_{{\textnormal{q}}_{i}}^{(l)}\subset T_{{\textnormal{t}}_{i}}^{(l)}
({\textnormal{q}}_{i},{\textnormal{t}}_{i})\in E
f
{\textnormal{q}}_{i}
({\textnormal{q}}_{i},{\textnormal{t}}_{j})
f
{\textnormal{q}}_{i_{1}}\neq{\textnormal{q}}_{i_{2}}\Rightarrow{\textnormal{t}%
}_{i_{1}}\neq{\textnormal{t}}_{i_{2}}
({\textnormal{q}}_{i},{\textnormal{t}}_{i}),i=1,...,|N({\textnormal{q}})|
\tilde{A}_{\mathcal{Q}}
A_{\mathcal{T}}
\tilde{D}_{\mathcal{Q}}=\mbox{diag}(\sum_{s}((\tilde{A}_{\mathcal{Q}})_{:s}))
l
S^{(l)}
|N(W)|\geq|W|
\Phi
\Phi\coloneqq Z_{N(W)}\geq 1
Z_{N(W)}=\mbox{AGG}_{\scriptsize\mbox{sum}}(A_{\mathcal{T}},Z_{W}^{T})
Z_{W}=\mbox{AGG}_{\max}(\tilde{D}_{\mathcal{Q}}^{-1}\cdot\tilde{A}_{\mathcal{Q%
}},(S^{(l)})^{T}).
{\textnormal{t}},{\textnormal{q}}
W=N^{\prime}({\textnormal{q}})
W
N(W)
\displaystyle N(W)=\{{\textnormal{t}}_{i}\in N({\textnormal{t}})|\exists{%
\textnormal{q}}_{j}\in W=N^{\prime}({\textnormal{q}}),\mbox{s.t.}T_{{%
\textnormal{q}}_{j}}^{(l)}\subset T_{{\textnormal{t}}_{i}}^{(l)}\}
\displaystyle N(W)=\{{\textnormal{t}}_{i}\in N({\textnormal{t}})|\exists{%
\textnormal{q}}_{j}\in W=N^{\prime}({\textnormal{q}}),\mbox{s.t.}T_{{%
\textnormal{q}}_{j}}^{(l)}\subset T_{{\textnormal{t}}_{i}}^{(l)}\}
\displaystyle=\{{\textnormal{t}}_{i}\in N({\textnormal{t}})|\exists{%
\textnormal{q}}_{j}\in W=N^{\prime}({\textnormal{q}}),\mbox{s.t.}S_{{%
\textnormal{t}}_{i},{\textnormal{q}}_{j}}=1\}
\displaystyle=\{{\textnormal{t}}_{i}\in N({\textnormal{t}})|\exists{%
\textnormal{q}}_{j}\in W=N^{\prime}({\textnormal{q}}),\mbox{s.t.}S_{{%
\textnormal{t}}_{i},{\textnormal{q}}_{j}}=1\}
\displaystyle=\{{\textnormal{t}}_{i}\in N({\textnormal{t}})|\max_{{\textnormal%
{q}}^{\prime}\in N^{\prime}({\textnormal{q}})}{S_{{\textnormal{t}}_{i},{%
\textnormal{q}}^{\prime}}^{(l)}=1}\}
\displaystyle=\{{\textnormal{t}}_{i}\in N({\textnormal{t}})|\max_{{\textnormal%
{q}}^{\prime}\in N^{\prime}({\textnormal{q}})}{S_{{\textnormal{t}}_{i},{%
\textnormal{q}}^{\prime}}^{(l)}=1}\}
\displaystyle=N({\textnormal{t}})\cap\{{\textnormal{t}}_{i}|\max_{{\textnormal%
{q}}^{\prime}\in N^{\prime}({\textnormal{q}})}{S_{{\textnormal{t}}_{i},{%
\textnormal{q}}^{\prime}}^{(l)}=1}\}
\displaystyle=N({\textnormal{t}})\cap\{{\textnormal{t}}_{i}|\max_{{\textnormal%
{q}}^{\prime}\in N^{\prime}({\textnormal{q}})}{S_{{\textnormal{t}}_{i},{%
\textnormal{q}}^{\prime}}^{(l)}=1}\}
\displaystyle=N({\textnormal{t}})\cap M({\textnormal{q}})
\displaystyle=N({\textnormal{t}})\cap M({\textnormal{q}})
M({\textnormal{q}})=\{{\textnormal{t}}_{i}|\max_{{\textnormal{q}}^{\prime}\in N%
^{\prime}({\textnormal{q}})}{S_{{\textnormal{t}}_{i},{\textnormal{q}}^{\prime}%
}^{(l)}=1}\}
M({\textnormal{q}})
\tilde{A}_{\mathcal{Q}}
(S^{(l)})^{T}\in R^{|V_{\mathcal{Q}}|\times|V_{\mathcal{T}}|}
\displaystyle z_{{\textnormal{q}},:}=max\{(S^{(l)})^{T}_{j,:},\forall j\in N^{%
\prime}({\textnormal{q}})\},
\displaystyle z_{{\textnormal{q}},:}=max\{(S^{(l)})^{T}_{j,:},\forall j\in N^{%
\prime}({\textnormal{q}})\},
z_{{\textnormal{q}},:}
M({\textnormal{q}})
z_{{\textnormal{q}}i}=\begin{cases}1,&i\in M({\textnormal{q}})\\
0,&\text{ else }\end{cases}
\displaystyle Z_{W}=\mbox{AGG}_{\max}(\tilde{A}_{\mathcal{Q}},(S^{(l)})^{T})
\displaystyle Z_{W}=\mbox{AGG}_{\max}(\tilde{A}_{\mathcal{Q}},(S^{(l)})^{T})
Z_{W}\in R^{|V_{\mathcal{Q}}|\times|V_{\mathcal{T}}|}
z_{{\textnormal{q}}:}
N(W)=N({\textnormal{t}})\cap M({\textnormal{q}})
M({\textnormal{q}})
|N(W)|
\begin{cases}&|M({\textnormal{q}})|=\sum_{i}z_{{\textnormal{q}},i}\\
&|N(W)|=\sum_{i}{z_{{\textnormal{q}},i}},i\in N({\textnormal{t}})\end{cases}
Z_{W}
\displaystyle Z_{N(W)}=\mbox{AGG}_{\scriptsize\mbox{sum}}(A_{\mathcal{T}},Z_{W%
}^{T})
\displaystyle Z_{N(W)}=\mbox{AGG}_{\scriptsize\mbox{sum}}(A_{\mathcal{T}},Z_{W%
}^{T})
Z_{N(W)}\in R^{|V_{\mathcal{T}}|\times|V_{\mathcal{Q}}|}
({\textnormal{t}},{\textnormal{q}})
|N(W)|
({\textnormal{t}},{\textnormal{q}})
|N(W)|=[Z_{N(W)}]_{{\textnormal{t}}{\textnormal{q}}}
|W|=|N^{\prime}({\textnormal{q}})|=\sum_{s}[\tilde{A}_{\mathcal{Q}}]_{{%
\textnormal{q}}s}
[Z_{N(W)}]_{{\textnormal{t}}{\textnormal{q}}}\geq\sum_{s}[\tilde{A}_{\mathcal{%
Q}}]_{{\textnormal{q}}s}
\displaystyle[Z_{N(W)}]_{{\textnormal{t}}{\textnormal{q}}}\geq\sum_{s}[\tilde{%
A}_{\mathcal{Q}}]_{{\textnormal{q}}s}
\displaystyle[Z_{N(W)}]_{{\textnormal{t}}{\textnormal{q}}}\geq\sum_{s}[\tilde{%
A}_{\mathcal{Q}}]_{{\textnormal{q}}s}
\displaystyle\Leftrightarrow[Z_{N(W)}]_{{\textnormal{t}}{\textnormal{q}}}/\sum%
_{s}[\tilde{A}_{\mathcal{Q}}]_{{\textnormal{q}}s}\geq 1
\displaystyle\Leftrightarrow
\displaystyle[Z_{N(W)}]_{{\textnormal{t}}{\textnormal{q}}}/\sum_{s}[\tilde{A}_%
{\mathcal{Q}}]_{{\textnormal{q}}s}\geq 1
\displaystyle\Leftrightarrow[\mbox{AGG}_{\scriptsize\mbox{sum}}(A_{\mathcal{T}%
},Z_{W}^{T})]_{{\textnormal{t}}{\textnormal{q}}}/\tilde{d}_{\textnormal{q}}\geq
1
\displaystyle\Leftrightarrow
\displaystyle[\mbox{AGG}_{\scriptsize\mbox{sum}}(A_{\mathcal{T}},Z_{W}^{T})]_{%
{\textnormal{t}}{\textnormal{q}}}/\tilde{d}_{\textnormal{q}}\geq 1
\displaystyle\Leftrightarrow[\mbox{AGG}_{\scriptsize\mbox{sum}}(A_{\mathcal{T}%
},Z_{W}^{T})\cdot\tilde{D}_{\mathcal{Q}}^{-1}]_{{\textnormal{t}}{\textnormal{q%
}}}\geq 1
\displaystyle\Leftrightarrow
\displaystyle[\mbox{AGG}_{\scriptsize\mbox{sum}}(A_{\mathcal{T}},Z_{W}^{T})%
\cdot\tilde{D}_{\mathcal{Q}}^{-1}]_{{\textnormal{t}}{\textnormal{q}}}\geq 1
\displaystyle\Leftrightarrow[\mbox{AGG}_{\scriptsize\mbox{sum}}(A_{\mathcal{T}%
},Z_{W}^{T}\cdot\tilde{D}_{\mathcal{Q}}^{-1})]_{{\textnormal{t}}{\textnormal{q%
}}}\geq 1
\displaystyle\Leftrightarrow
\displaystyle[\mbox{AGG}_{\scriptsize\mbox{sum}}(A_{\mathcal{T}},Z_{W}^{T}%
\cdot\tilde{D}_{\mathcal{Q}}^{-1})]_{{\textnormal{t}}{\textnormal{q}}}\geq 1
\tilde{d}_{\textnormal{q}}
\tilde{D}_{\mathcal{Q}}=\mbox{diag}[\sum_{s}((\tilde{A}_{\mathcal{Q}})_{:s})]
\Phi
({\textnormal{t}},{\textnormal{q}})
|N(W)|
|W|
({\textnormal{t}},{\textnormal{q}})
\Phi^{(l+1)}(\tilde{A}_{\mathcal{Q}},A_{\mathcal{T}})=\mbox{AGG}_{\scriptsize%
\mbox{sum}}(A_{\mathcal{T}},Z_{W}^{T}\cdot\tilde{D}_{\mathcal{Q}}^{-1})\geq 1,
\displaystyle Z_{W}^{T}\cdot\tilde{D}_{\mathcal{Q}}^{-1}=[\mbox{AGG}_{\max}(%
\tilde{A}_{\mathcal{Q}},(S^{(l)}))]^{T}\cdot\tilde{D}_{\mathcal{Q}}^{-1}
\displaystyle Z_{W}^{T}\cdot\tilde{D}_{\mathcal{Q}}^{-1}
\displaystyle=[\mbox{AGG}_{\max}(\tilde{A}_{\mathcal{Q}},(S^{(l)}))]^{T}\cdot%
\tilde{D}_{\mathcal{Q}}^{-1}
\displaystyle=[\tilde{D}_{\mathcal{Q}}^{-1}\cdot\mbox{AGG}_{\max}(\tilde{A}_{%
\mathcal{Q}},(S^{(l)}))]^{T}
\displaystyle=[\tilde{D}_{\mathcal{Q}}^{-1}\cdot\mbox{AGG}_{\max}(\tilde{A}_{%
\mathcal{Q}},(S^{(l)}))]^{T}
\displaystyle=[\mbox{AGG}_{\max}(\tilde{D}_{\mathcal{Q}}^{-1}\cdot\tilde{A}_{%
\mathcal{Q}},(S^{(l)}))]^{T}
\displaystyle=[\mbox{AGG}_{\max}(\tilde{D}_{\mathcal{Q}}^{-1}\cdot\tilde{A}_{%
\mathcal{Q}},(S^{(l)}))]^{T}
{\mathcal{C}}_{\mathcal{Q}}
G_{\mathcal{Q}}
{\mathcal{C}}_{\mathcal{T}}
G_{\mathcal{T}}
G_{\mathcal{Q}}
G_{\mathcal{T}}
{\mathcal{C}}_{\mathcal{Q}}
G_{\mathcal{T}}
{\mathcal{C}}_{\mathcal{T}}
G_{\mathcal{T}}
G_{\mathcal{Q}}
G_{\mathcal{T}}
{\mathcal{C}}_{\mathcal{T}}
{\mathcal{C}}_{\mathcal{Q}}
{\mathcal{C}}_{\mathcal{Q}}
D^{2}
D^{2}
S_{subtree}^{(0)}
S_{subtree}^{(0)}
0
S_{subtree}^{(0)}
\displaystyle Raw:S_{subtree}^{(0)}=CosineSimilarity(X_{\mathcal{T}},X_{%
\mathcal{Q}})=Norm(X_{\mathcal{T}})\cdot Norm(X_{\mathcal{Q}}^{T})
\displaystyle Raw:S_{subtree}^{(0)}
\displaystyle=CosineSimilarity(X_{\mathcal{T}},X_{\mathcal{Q}})=Norm(X_{%
\mathcal{T}})\cdot Norm(X_{\mathcal{Q}}^{T})
\displaystyle Learnable:S_{subtree}^{(0)}=MLP(X_{\mathcal{T}})\cdot MLP(X_{%
\mathcal{Q}})^{T}
\displaystyle Learnable:S_{subtree}^{(0)}
\displaystyle=MLP(X_{\mathcal{T}})\cdot MLP(X_{\mathcal{Q}})^{T}
\displaystyle\footnotesize[S^{(l+1)}_{gnn}]_{ij}=MLP(concat([H_{\mathcal{T}}^{%
(l)}]_{i},[H_{\mathcal{Q}}^{(l)}]_{j})).
\displaystyle\footnotesize[S^{(l+1)}_{gnn}]_{ij}=MLP(concat([H_{\mathcal{T}}^{%
(l)}]_{i},[H_{\mathcal{Q}}^{(l)}]_{j})).
|V_{\mathcal{T}}|\times|V_{\mathcal{Q}}|
|V_{\mathcal{T}}|\times|V_{\mathcal{Q}}|\times|D^{(l+1)}|
D^{(l+1)}
l+1
S^{(l+1)}
S^{(l+1)}=S_{gnn}^{(l+1)}\odot S_{subtree}^{(l+1)}
S_{subtree}^{(l+1)}\in R^{|V_{\mathcal{T}}|\times|V_{\mathcal{Q}}|}
S_{gnn}^{(l+1)}\in R^{|V_{\mathcal{T}}|\times|V_{\mathcal{Q}}|\times|D^{(l+1)}|}
S_{subtree}^{(l+1)}
\tilde{S}_{subtree}^{(l+1)}
\forall k\in[0,D^{(l+1)}),[\tilde{S}_{subtree}^{(l+1)}]_{ijk}=[S_{subtree}^{(l%
+1)}]_{ij}
S^{(l+1)}=S_{gnn}^{(l+1)}\odot\tilde{S}_{subtree}^{(l+1)}
S_{subtree}^{(L)}
S_{gnn}^{(L)}
S_{subtree}^{(L)}
S_{gnn}^{(L)}
i
j
i
j
[S_{subtree}^{(L)}]_{ij}=1
\displaystyle\forall j,\max_{i}(S_{subtree}^{(L)})_{ij}=1
\displaystyle\forall j,
\displaystyle\max_{i}(S_{subtree}^{(L)})_{ij}=1
\displaystyle\Leftrightarrow\sum_{j}\max_{i}(S_{subtree}^{(L)})_{ij}=|V_{%
\mathcal{Q}}|
\displaystyle\Leftrightarrow
\displaystyle\sum_{j}\max_{i}(S_{subtree}^{(L)})_{ij}=|V_{\mathcal{Q}}|
\displaystyle\Leftrightarrow\sum_{j}\max_{i}(S_{subtree}^{(L)})_{ij}/|V_{%
\mathcal{Q}}|=1
\displaystyle\Leftrightarrow
\displaystyle\sum_{j}\max_{i}(S_{subtree}^{(L)})_{ij}/|V_{\mathcal{Q}}|=1
\displaystyle\sum_{i}\max_{j}(S_{subtree}^{(L)})_{ij}\geq|V_{\mathcal{Q}}|\Leftrightarrow
\displaystyle\sum_{i}\max_{j}(S_{subtree}^{(L)})_{ij}\geq|V_{\mathcal{Q}}|\Leftrightarrow
\displaystyle\sum_{i}\max_{j}(S_{subtree}^{(L)})_{ij}/|V_{\mathcal{Q}}|\geq 1
\displaystyle\sum_{i}\max_{j}(S_{subtree}^{(L)})_{ij}/|V_{\mathcal{Q}}|\geq 1
\sigma(x)=\mathrm{Sigmoid}(ax+b)
a,b
\sigma
\displaystyle r_{subtree}=\sigma(\sum_{i}\max_{j}(S_{subtree}^{(L)})_{ij}/|V_{%
\mathcal{Q}}|)\cdot\sigma(\sum_{j}\max_{i}(S_{subtree}^{(L)})_{ij}/|V_{%
\mathcal{Q}}|)
\displaystyle r_{subtree}=\sigma(\sum_{i}\max_{j}(S_{subtree}^{(L)})_{ij}/|V_{%
\mathcal{Q}}|)\cdot\sigma(\sum_{j}\max_{i}(S_{subtree}^{(L)})_{ij}/|V_{%
\mathcal{Q}}|)
\displaystyle r_{gnn}=\sigma(MLP(concat[NTN(H_{\mathcal{T}}^{(L)},H_{\mathcal{%
Q}}^{(L)}),\sum_{i}\sum_{j}{S_{subtree}^{(L)}}]))
\displaystyle r_{gnn}=\sigma(MLP(concat[NTN(H_{\mathcal{T}}^{(L)},H_{\mathcal{%
Q}}^{(L)}),\sum_{i}\sum_{j}{S_{subtree}^{(L)}}]))
H_{\mathcal{T}}^{(L)},H_{\mathcal{Q}}^{(L)}
NTN
r=r_{gnn}\cdot r_{subtree}
r
0
1
y
L=MSE(r_{gnn},y)+MAE(r_{subtree},y)
3e-4
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
{}_{\pm\text{13.31}}
{}_{\pm\text{18.58}}
{}_{\pm\text{1.04}}
{}_{\pm\text{8.11}}
{}_{\pm\text{0.00}}
{}_{\pm\text{19.73}}
{}_{\pm\text{26.98}}
{}_{\pm\text{24.38}}
D^{2}
{}_{\pm\text{2.09}}
{}_{\pm\text{2.56}}
{}_{\pm\text{0.00}}
{}_{\pm\text{2.92}}
{}_{\pm\text{1.04}}
{}_{\pm\text{4.02}}
{}_{\pm\text{0.0}}
{}_{\pm\text{6.20}}
D^{2}
{}_{\pm\text{4.45}}
{}_{\pm\text{1.44}}
{}_{\pm\text{0.00}}
{}_{\pm\text{2.97}}
{}_{\pm\text{1.03}}
{}_{\pm\text{1.79}}
{}_{\pm\text{0.0}}
{}_{\pm\text{7.44}}
D^{2}
{}_{\pm\text{1.60}}
D^{2}
{}_{\pm\text{4.45}}
{}_{\pm\text{0.00}}
{}_{\pm\text{0.00}}
{}_{\pm\text{0.00}}
{}_{\pm\text{0.00}}
{}_{\pm\text{0.00}}
{}_{\pm\text{0.00}}
{}_{\pm\text{0.00}}
{}_{\pm\text{0.00}}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
D^{2}
{}_{\pm\text{0.65}}
{}_{\pm\text{2.70}}
{}_{\pm\text{0.27}}
{}_{\pm\text{2.28}}
{}_{\pm\text{1.68}}
{}_{\pm\text{3.54}}
{}_{\pm\text{0.27}}
{}_{\pm\text{3.51}}
D^{2}
{}_{\pm\text{0.27}}
{}_{\pm\text{0.54}}
{}_{\pm\text{0.00}}
{}_{\pm\text{0.00}}
{}_{\pm\text{21.82}}
{}_{\pm\text{0.93}}
{}_{\pm\text{24.67}}
{}_{\pm\text{1.14}}
{}_{\pm\text{1.34}}
{}_{\pm\text{0.00}}
D^{2}
{}_{\pm\text{0.27}}
{}_{\pm\text{1.15}}
{}_{\pm\text{1.06}}
