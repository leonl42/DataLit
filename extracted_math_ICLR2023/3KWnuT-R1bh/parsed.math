H\times W
S\times S
N=\frac{HW}{S^{2}}
H
W
S
d
N
d
N
X\in\mathbb{R}^{B\times N\times C}
X^{\prime}\in\mathbb{R}^{B\times H\times W\times C}
\mathcal{F}
X^{\prime}
E^{B\times H\times W\times C}
k
k\geq 3
\frac{k-1}{2}
\mathcal{F}
lr_{\rm scale}=\nicefrac{{0.0005\cdot{\rm BatchSize}_{\rm global}}}{{512}}
224\times 224
384\times 384,448\times 448,512\times 512
384\times 384
384\times 384
\times
\times
\times
\times
d
d\times l\times k^{2}
l
k
l
l(d^{2}+k^{2}d)
k=3
l=1
d=192
192\times 14\times 14=37632
38952-37632=960
l
k\times k
14\times 14\times d\times l\times k^{2}
196\times 192\times 9=0.34M
k=3
l=1
224^{2}
224^{2}
224^{2}
224^{2}
224^{2}
240^{2}
260^{2}
300^{2}
380^{2}
384^{2}
384^{2}
224^{2}
224^{2}
224^{2}
224^{2}
224^{2}
224^{2}
224^{2}
224^{2}
224^{2}
224^{2}
224^{2}
224^{2}
224^{2}
\times
\times
\uparrow
\sim
-1
\times
\times
\times
K
\times
\times
\{
\}
\{
\}
\varepsilon
i
j
i
j-1
\uparrow
\times
\times
\times
\times
\times
\times
\times
\times
\times
\times
\times
\times
\times
\times
\times
\times
\times
\times
q
k
v
q
k
v
\times
\times
