1,
3
2
1
3
3
1
1
3
1
4
\bf 1\%
\bf 1\%
1\%
13.3\%
12.1\%
\mathcal{P}
\mathcal{I}
z
\mathcal{S}
\mathcal{I}\in\mathcal{R}^{H\times W\times 3}
\bm{z}\sim\mathcal{N}(\mathbf{0},\mathbf{I})
\mathcal{I}=\Phi_{\text{T2I}}(\bm{z},\mathcal{S})
\Phi_{\text{T2I}}(\cdot)
\tau_{\theta}(\cdot)
\mathcal{S}
\mathcal{E}(\cdot)
\mathcal{D}(\cdot)
\epsilon_{\theta}(\cdot)
\bm{x}_{t-1}=f(\bm{x}_{t},\epsilon_{\theta})
\bm{x}_{t}
t
t\in[1,T]
T
\bm{x}_{T}
\bm{z}
f(\cdot)
\epsilon_{\theta}(\bm{x}_{t},t,\tau_{\theta}(\mathcal{S}))
\displaystyle\{\mathcal{I},\mathcal{P}_{1:k}\}=\Phi_{\text{T2D}}(\bm{z},%
\mathcal{S}),
\displaystyle\{\mathcal{I},\mathcal{P}_{1:k}\}=\Phi_{\text{T2D}}(\bm{z},%
\mathcal{S}),
\mathcal{P}_{1:k}
k
1\%
\mathcal{X}\in\mathcal{R}^{H\times W\times 3}
q(\bm{x}_{1:T}|\bm{x}_{0})
\bm{x}_{0}=\mathcal{E}(\mathcal{X})
\beta_{1},\dotsc,\beta_{T}
\displaystyle q(\bm{x}_{t}|\bm{x}_{t-1})\coloneqq\mathcal{N}(\bm{x}_{t};\sqrt{%
1-\beta_{t}}\bm{x}_{t-1},\beta_{t}\mathbf{I}),
\displaystyle q(\bm{x}_{t}|\bm{x}_{t-1})\coloneqq\mathcal{N}(\bm{x}_{t};\sqrt{%
1-\beta_{t}}\bm{x}_{t-1},\beta_{t}\mathbf{I}),
t
t
1
\bm{x}_{t}
\mathcal{S}
\epsilon_{\theta}
\displaystyle\{\mathcal{F},\mathcal{A}\}=\epsilon_{\theta}(\bm{x}_{t},t,\tau_{%
\theta}(\mathcal{S})),
\displaystyle\{\mathcal{F},\mathcal{A}\}=\epsilon_{\theta}(\bm{x}_{t},t,\tau_{%
\theta}(\mathcal{S})),
\mathcal{S}
\mathcal{F}
8\times 8
16\times 16
32\times 32
64\times 64
\mathcal{A}
16
\mathcal{A}=\text{softmax}\left(\frac{QK^{T}}{\sqrt{d}}\right)
d
16
4
\mathcal{\hat{A}}
\mathcal{\hat{A}}
\mathcal{F}
1\times 1
\mathcal{\hat{F}}=\text{Conv}([\mathcal{F},\mathcal{\hat{A}}])
\mathcal{\hat{F}}
\mathcal{\hat{F}}
N
\{Q_{0},Q_{1}...Q_{T}\}
N
\mathbf{O}={o_{1},\cdots,o_{N}}\in\{0,1\}^{N\times H\times W}
\{C_{0},C_{1}...C_{K}\}
\tau_{\theta}(\cdot)
\displaystyle\hat{Q}_{i}=\text{MLP}([Q_{i},\tau_{\theta}(C_{j})]),
\displaystyle\hat{Q}_{i}=\text{MLP}([Q_{i},\tau_{\theta}(C_{j})]),
Q_{i}
C_{j}
i
j
\mathbf{O}\in\mathcal{R}^{M\times H\times W}
M
1
17
T
L
100
50k
512\times 512
20
0.0001
\downarrow
{}^{\text{50}}
{}^{\text{75}}
{}^{\text{S}}
{}^{\text{M}}
{}^{\text{L}}
2k
40k
38k
100
1k
80k
80
80k
30k
40k
20k
8
19
8
19
\mathcal{F}
\mathcal{F}
\mathcal{\hat{A}}
\mathcal{\hat{A}}
73.7\%
8.5\%
78.5\%
10\%
10\%
12.1\%
26.5\%
10\%
5.1\%
20\%
\mathcal{F}
1\%
81\%
10\%
2\%
4\%
10
1\%
13.3\%
12.1\%
{}^{\text{50}}
{}^{\text{75}}
{}^{\text{M}}
{}^{\text{L}}
\times
\times
\times
\times
\times
\times
\times
\times
8
19
8
19
\delta_{1}
\uparrow
\delta_{2}
\uparrow
\delta_{3}
\uparrow
\downarrow
\downarrow
\downarrow
\downarrow
0m
10m
0m
10m
50k
\times
1\%
10\%
10\%
5\%
48.9\%
5\%
0.1
0.02
68.4\%
73.6\%
69.5\%
n
n\times d
n\times 768
\mathcal{\hat{F}}
C\times H\times W
C\times N
1\times 1
3\times 3
N\times H\times W
C\times H\times W
C\times N
\mathbf{O}\in\mathcal{1}^{M\times H\times W}
\mathbf{O}\in\mathcal{17}^{M\times H\times W}
