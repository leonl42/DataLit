('1', 'k')
('2.0', 'Q=\\{\\mathbf{q}_i\\}_{i=1}^n')
('2.0', 'D=\\{\\mathbf{d}_j\\}_{j=1}^m')
('2.0', '\\mathbf{q}_i')
('2.0', '\\mathbf{d}_j')
('2.0', 'd')
('2.0', 'f(Q, D) = \\sum_{i = 1}^n\\sum_{j=1}^m \\mathbf{A}_{ij}\\mathbf{P}_{ij}')
('2.0', '\\mathbf{P}_{ij}=\\mathbf{q}_i^\\top \\mathbf{d}_j')
('2.0', '\\mathbf{A} \\in \\{0, 1\\}^{n \\times m}')
('2.0', '\\mathbf{A}_{ij}')
('2.0', '\\mathbf{q}_i')
('2.0', '\\mathbf{d}_j')
('2.0', '\\mathbf{A}_{ij}=\\mathbbm{1}_{[j=\\text{argmax}_{j^\\prime}(\\mathbf{P}_{ij^\\prime})]}')
('2.0', '1 \\leq j^\\prime \\leq m')
('2.0', 'D')
('2.0', '\\mathbbm{1}_{[*]}')
('2.0', 'f_\\text{ColBERT}(Q, D)')
('2.0', '\\label{eq:som}\nf_\\text{ColBERT}(Q, D)= \\frac{1}{n}\\sum_{i = 1}^n\\sum_{j=1}^m \\mathbf{A}_{ij}\\mathbf{P}_{ij} =  \\frac{1}{n}\\sum_{i=1}^n\\max_{1 \\leq j \\leq m} \\mathbf{q}_i^\\top \\mathbf{d}_j.')
('2.0', 'n')
('2.0', 'D^+')
('2.0', 'Q')
('2.0', 'D_{1:B} = [D_1,\\dots,D_B')
('2.0', 'D^+ \\in D_{1:B}')
('2.0', '\\mathcal{L}_\\text{CE} = -\\log \\frac{\\exp{f(Q, D^+)}}{\\sum_{b=1}^B \\exp{f(Q, D_b)}}')
('2.1', 'n')
('2.1', 'k^\\prime')
('2.1', 'nk^\\prime')
('2.1', 'k')
('2.1', 'f_\\text{XTR}')
('2.1', 'f_{\\text{XTR}^\\prime}')
('3', 'D^+')
('3', 'D^-_{1:r} = [D_1^-, \\dots, D_r^-]')
('3', 'Q')
('3', 'D^+')
('3.0', 'f_\\text{ColBERT}(Q, D^+) = 0.8')
('3.0', '\\mathbf{q}_i^\\top \\mathbf{d}_j^+')
('3.0', '\\mathbf{A}_{ij}=1')
('3.0', 'f_\\text{ColBERT}(Q, D^-)=0.2')
('3.0', 'D^- \\in D^-_{1:r}')
('3.0', 'D^-')
('3.0', '\\mathbf{q}_i^\\top \\mathbf{d}_j^- > 0.8')
('3.0', '\\mathbf{A}_{ij}=1')
('3.0', '\\mathbf{q}_i^\\top \\mathbf{d}_j^- \\rightarrow 0')
('3.0', 'n')
('3.0', 'k^\\prime=1')
('3.0', 'D^+')
('3.1', '\\mathbf{\\hat{A}}')
('3.1', '\\mathbf{\\hat{A}}_{ij}=\\mathbbm{1}_{[j \\in \\text{top-}k_{j^\\prime}(\\mathbf{P}_{ij^\\prime})]}')
('3.1', 'k')
('3.1', '1 \\leq j^\\prime \\leq mB')
('3.1', 'B')
('3.1', 'k')
('3.1', 'k_\\text{train}')
('3.1', 'k')
('3.1', '\\label{eq:som-inb}\nf_\\text{XTR}(Q, D)= \\frac{1}{Z}\\sum_{i=1}^n\\max_{1 \\leq j \\leq m} \\mathbf{\\hat{A}}_{ij}\\mathbf{q}_i^\\top \\mathbf{d}_j.')
('3.1', 'D')
('3.1', 'k_\\text{train}')
('3.1', 'Z=|\\{i | \\exists j, s.t. \\mathbf{\\hat{A}}_{ij} > 0 \\}|')
('3.1', 'D')
('3.1', 'n')
('3.1', 'Z')
('3.1', '\\mathbf{\\hat{A}}_{ij}=0')
('3.1', 'Z')
('3.1', 'f_\\text{XTR}(Q,D)')
('3.1', 'f_\\text{ColBERT}')
('3.1', 'D^+')
('3.1', 'f_\\text{XTR}(Q,D^+) = 0')
('3.1', 'D^+')
('3.2', '\\hat{D}_{1:C}')
('3.2', '\\hat{D}_{1:C} = \\{\\hat{D} | d_j \\in \\hat{D} \\wedge d_j \\in \\text{top-}k^\\prime(\\mathbf{q}_*) \\}.')
('3.2', 'k^\\prime(\\mathbf{q}_*)')
('3.2', 'k^\\prime')
('3.2', '\\mathbf{q}^\\top \\mathbf{d}')
('3.2', 'n')
('3.2', 'C')
('3.2', '\\leq nk^\\prime')
('3.2', '\\mathcal{O}(n^2k^\\prime \\bar{m}d)')
('3.2', '\\bar{m}')
('3.2.0', 'k^\\prime')
('3.2.0', 'n')
('3.2.0', 'C=nk^\\prime')
('3.2.0', 'n')
('3.2.0', 'n')
('3.2.0', 'n')
('3.2.0', 'f_\\text{ColBERT}')
('3.2.0', 'f_{\\text{XTR}^\\prime}')
('3.2.0', 'D_a')
('3.2.0', 'D_b')
('3.2.0', 'f_\\text{ColBERT}')
('3.2.0', 'D_a')
('3.2.0', 'D_b')
('3.2.0', 'f_{\\text{XTR}^\\prime}')
('3.2.0', 'D_a')
('3.2.0', 'D_b')
('3.2.0', 'D_a')
('3.2.0', 'D_b')
('3.2.0', 'm')
('3.2.0', 'D_b')
('3.2.0', 's_2')
('3.2.0', 'm \\leq s_2 \\leq s_1')
('3.2.0', '\\hat{D}')
('3.2.0', '\\label{eq:som-approx}\nf_{\\text{XTR}^\\prime}(Q, \\hat{D})= \\frac{1}{n}\\sum_{i=1}^n \\max_{1 \\leq j \\leq m} \\big[\\mathbf{\\hat{A}}_{ij}\\mathbf{q}_i^\\top \\mathbf{d}_j + (1-\\mathbf{\\hat{A}}_{ij}) m_i \\big].\n% \\vspace{-0.1cm}')
('3.2.0', 'm_i \\in \\mathbb{R}')
('3.2.0', 'q_i')
('3.2.0', '\\mathbf{\\hat{A}}')
('3.2.0', 'k^\\prime')
('3.2.0', 'k')
('3.2.0', 'q_i')
('3.2.0', 'm_i')
('3.2.0', '\\mathbf{\\hat{A}}_{i*}=0')
('3.2.0', 'm_i \\geq 0')
('3.2.0', 'f_{\\text{XTR}^\\prime}')
('3.2.0', '\\mathbf{q}_i^\\top \\mathbf{d}_j')
('3.2.0', '\\mathbf{\\hat{A}}_{ij}=1')
('3.2.0', '\\mathbf{\\hat{A}}_{ij}=0')
('3.2.0', '\\mathbf{\\hat{A}}_{ij}\\mathbf{q}_i^\\top \\mathbf{d}_j = 0')
('3.2.0', '\\mathbf{\\hat{A}}_{ij}=1')
('3.2.0', '\\hat{D}')
('3.2.0', 'q_i')
('3.2.0', '\\mathbf{\\hat{A}}_{i*}=0')
('3.2.0', 'm_i')
('3.2.0', '\\mathbf{q}_i')
('3.2.0', '\\hat{D}')
('3.2.0', 'k^\\prime')
('3.2.0', 'q_i')
('3.2.0', 'k^\\prime')
('3.2.0', '[\\mathbf{q}_i^\\top \\mathbf{d}_{(1)}, \\dots \\mathbf{q}_i^\\top \\mathbf{d}_{(k^\\prime)}]')
('3.2.0', '\\mathbf{d}_{(*)}')
('3.2.0', 'm_i \\leq \\mathbf{q}_i^\\top \\mathbf{d}_{(k^\\prime)}')
('3.2.0', 'k^\\prime')
('3.2.0', 'm_i = \\mathbf{q}_i^\\top \\mathbf{d}_{(k^\\prime)}')
('3.2.0', 'f_\\text{XTR}')
('3.2.0', 'f_{\\text{XTR}^\\prime}')
('3.2.0', 'f_{\\text{XTR}}')
('3.2.0', '\\times')
('3.2.0', '\\clubsuit')
('3.2.0', '\\vardiamondsuit')
('4.0', 'k_\\text{train}')
('4.0', 'k^\\prime')
('4.2.0', '_\\text{xxl}')
('4.2.0', '_\\text{base}')
('4.2.0', '_\\text{xxl}')
('4.2.0', '\\clubsuit')
('4.2.0', '\\vardiamondsuit')
('5.0.0', 'k')
('5.0.0', 'k')
('5.0.0', 'k')
('5.0.0', 'k')
('5.0.0', 'k')
('5.0.0', 'k')
('5.0.0.0', 'k')
('5.1', 'f_{\\text{XTR}^\\prime}')
('5.1', 'f_{\\text{XTR}^\\prime}')
('5.1', 'k^\\prime')
('5.1', 'k^\\prime')
('5.1', 'k^\\prime')
('5.2.0', 'k_\\text{train}')
('5.2.0', 'k^\\prime')
('5.2.0', 'k^\\prime')
('5.2.0', 'k_\\text{train}')
('5.2.0', 'k^\\prime')
('5.2.0', 'k_\\text{train}')
('5.2.0', 'k_\\text{train}')
('5.2.0', 'k^\\prime')
('5.2.0.0', 'k_\\text{train}')
('5.2.0.0', 'k^\\prime=40,000')
('5.2.0.0', 'k_\\text{train}')
('5.2.0.0', 'k_\\text{train}')
('5.2.0.0', 'k_\\text{train}')
('10.0', '\\mathcal{L}_\\text{CE}')
('10.0', 'f_\\text{ColBERT}')
('10.0', '\\mathcal{L}_\\text{CE} = -\\log \\frac{\\exp{f(Q, D^+)}}{\\sum_{b=1}^B \\exp{f(Q, D_b)}} = - f_\\text{ColBERT}(Q, D^+) + \\log \\sum_{b=1}^B \\exp{f_\\text{ColBERT}(Q, D_b)}')
('10.0', 'f_\\text{ColBERT}(Q, D) = \\frac{1}{n}\\sum_{i=1}^n \\sum_{j=1}^m \\mathbf{A}_{ij} \\mathbf{P}_{ij} =  \\frac{1}{n}\\sum_{i=1}^n \\mathbf{P}_{i \\hat{j}}')
('10.0', '\\hat{j}')
('10.0', 'i')
('10.0', '\\mathbf{A}_{ij}=1')
('10.0', '\\mathbf{P}_{i\\hat{j}}^+')
('10.0', 'D^+ \\in D_{1:B}')
('10.0', '\\begin{split}\n    \\frac{\\partial \\mathcal{L}_\\text{CE}}{\\partial \\mathbf{P}_{i\\hat{j}}^+} &= -\\frac{f(Q, D^+)}{\\partial \\mathbf{P}_{i\\hat{j}}^+} + \\frac{1}{\\sum_{b=1}^B \\exp{f(Q, D_b)}}\\frac{\\partial}{\\partial \\mathbf{P}_{i\\hat{j}}^+}\\sum_{b=1}^B \\exp{f(Q, D_b)}\\\\\n    &= -\\frac{\\partial}{\\partial \\mathbf{P}_{i\\hat{j}}^+} \\frac{1}{n}\\sum_{i=1}^n\\max_{1 \\leq j \\leq m} \\mathbf{P}_{ij}^+ + \\frac{1}{\\sum_{b=1}^B \\exp{f(Q, D_b)}} \\sum_{b=1}^B \\frac{\\partial}{\\partial \\mathbf{P}_{i\\hat{j}}^+} \\exp{f(Q, D_b)} \\\\\n    &= -\\frac{1}{n} + \\frac{1}{\\sum_{b=1}^B \\exp{f(Q, D_b)}} \\sum_{b=1}^B \\exp{f(Q, D_b)} \\frac{\\partial f(Q, D_b)}{\\partial \\mathbf{P}_{i\\hat{j}}^+} \\\\\n    &= -\\frac{1}{n} + \\frac{1}{n}\\frac{\\exp{f(Q, D^+)}}{\\sum_{b=1}^B \\exp{f(Q, D_b)}} = -\\frac{1}{n}[1 - P(D^+|Q, D_{1:B})].\n\\end{split}')
('10.0', '\\mathbf{P}_{i\\hat{j}}^-')
('10.0', 'D^- \\in D_{1:B}')
('10.0', '\\begin{split}\n    \\frac{\\partial \\mathcal{L}_\\text{CE}}{\\partial \\mathbf{P}_{i\\hat{j}}^-} &= -\\frac{f(Q, D^+)}{\\partial \\mathbf{P}_{i\\hat{j}}^-} + \\frac{1}{\\sum_{b=1}^B \\exp{f(Q, D_b)}}\\frac{\\partial}{\\partial \\mathbf{P}_{i\\hat{j}}^-}\\sum_{b=1}^B \\exp{f(Q, D_b)} \\\\\n    &= \\frac{1}{n}\\frac{\\exp{f(Q, D^-)}}{\\sum_{b=1}^B \\exp{f(Q, D_b)}} = \\frac{1}{n}P(D^-|Q,D_{1:B}).\n\\end{split}')
('10.0', '\\mathbf{P}_{i\\hat{j}}^+')
('10.0', 'P(D^+|Q, D_{1:B}) \\rightarrow 1')
('10.0', '\\mathbf{P}_{i\\hat{j}}^-')
('10.0', 'P(D^-|Q,D_{1:B}) \\rightarrow 0')
('10.0', '\\mathbf{P}_{i\\hat{j}}^-')
('10.0', '\\mathbf{d}_{\\hat{j}}^-')
('10.0', 'P(D^-|Q,D_{1:B})')
('10.0.0', 'f_\\text{XTR}')
('10.0.0', 'f_\\text{XTR}(Q, D_{1:B}) = \\frac{1}{Z} \\sum_{i=1}^n \\sum_{j=1}^m \\mathbf{A}_{ij}\\mathbf{\\hat{A}}_{ij}\\mathbf{P}_{ij} = \\frac{1}{Z}\\sum_{i=1}^{n} \\mathbf{P}_{i \\bar{j}}')
('10.0.0', '\\bar{j}')
('10.0.0', 'k_\\text{train}')
('10.0.0', 'q_i')
('10.0.0', '\\mathbf{A}_{ij}=1')
('10.0.0', '\\mathbf{\\hat{A}}_{ij}=1')
('10.0.0', '\\bar{j}')
('10.0.0', '\\mathbf{P}_{i \\bar{j}} = 0')
('10.0.0', 'Z')
('10.0.0', '\\mathbf{P}_{i \\bar{j}}')
('10.0.0', 'Z > 0')
('10.0.0', '\\mathbf{P}_{i \\bar{j}}')
('10.0.0', '\\mathbf{P}_{i \\bar{j}}^+')
('10.0.0', 'D^+ \\in D_{1:B}')
('10.0.0', '\\begin{split}\n    \\frac{\\partial \\mathcal{L}_\\text{CE}}{\\partial \\mathbf{P}_{i\\bar{j}}^+} &= -\\frac{f(Q, D^+)}{\\partial \\mathbf{P}_{i\\bar{j}}^+} + \\frac{1}{\\sum_{b=1}^B \\exp{f(Q, D_b)}}\\frac{\\partial}{\\partial \\mathbf{P}_{i\\bar{j}}^+}\\sum_{b=1}^B \\exp{f(Q, D_b)} \\\\\n    &= -\\frac{1}{Z^+}\\big[ 1 - \\frac{\\exp{f(Q, D^+)}}{\\sum_{b=1}^B \\exp{f(Q, D_b)}}\\big] \\\\\n    &= -\\frac{1}{Z^+}\\big[ 1 - P(D^+|Q,D_{1:B}) \\big].\n\\end{split}')
('10.0.0', '\\mathbf{P}_{i \\bar{j}}^+')
('10.0.0', 'Z^+')
('10.0.0', 'D^+')
('10.0.0', '\\mathbf{P}_{i \\bar{j}}^+')
('10.0.0', '\\mathbf{P}_{i\\bar{j}}^-')
('10.0.0', '\\begin{split}\n    \\frac{\\partial \\mathcal{L}_\\text{CE}}{\\partial \\mathbf{P}_{i\\bar{j}}^-} &= -\\frac{f(Q, D^+)}{\\partial \\mathbf{P}_{i\\bar{j}}^-} + \\frac{1}{\\sum_{b=1}^B \\exp{f(Q, D_b)}}\\frac{\\partial}{\\partial \\mathbf{P}_{i\\bar{j}}^-}\\sum_{b=1}^B \\exp{f(Q, D_b)} \\\\\n    &= -\\frac{1}{Z^-}\\big[- \\frac{\\exp{f(Q, D^-)}}{\\sum_{b=1}^B \\exp{f(Q, D_b)}}\\big] \\\\\n    &= \\frac{1}{Z^-} P(D^-|Q,D_{1:B}).\n\\end{split}')
('10.0.0', 'Z^-')
('10.0.0', 'P(D^-|Q,D_{1:B})')
('10.0.0', 'D^-')
('10.0.0', 'Z^-')
('10.0.0', '\\mathbf{P}_{i\\hat{j}}^-')
('10.0.0', 'Z^-')
('10.0.0', 'Z^+')
('11', '\\mathcal{O}(nk^\\prime)')
('11', 'nk^\\prime')
('11', '\\bar{m}d')
('11', '\\bar{m}=')
('11', 'nd')
('11', '2n\\bar{m}d')
('11', 'n\\bar{m}')
('11', 'n')
('11', 'n^2k^\\prime(2\\bar{m}d + \\bar{m} + 1)')
('11', '\\mathcal{O}(nk^\\prime \\bar{m}d)')
('11', 'n = 16, k^\\prime = 1000, \\bar{m} = 55, d = 128')
('11', 'k^\\prime')
('11', 'nk^\\prime')
('11', 'n\\bar{r}')
('11', 'n')
('11', '\\bar{r}')
('11', 'n^2k^\\prime(\\bar{r}+1)')
('11', '\\times')
('12', 'k_\\text{train}')
('12', 'k_\\text{train}')
('12', 'k_\\text{train}=\\{32, 64, 128, 256, 320\\}')
('12', 'k^\\prime')
('12', 'k^\\prime=40,000')
('12', 'k^\\prime=40,000')
('12', 'k^\\prime=1,000')
('12', 'k^\\prime=4,000')
('12', 'k^\\prime')
('12', 'k_\\text{train}')
('12', '_\\text{base}')
('12', '_\\text{xxl}')
('12.0', 'N')
('12.0', 'N')
('12.0', 'N')
('12.0', '_\\text{v2}')
('12.0', '_\\text{v2}')
('12.0', '_\\text{xxl}')
('12.0', '_\\text{xxl}')
('13', 'k^\\prime')
